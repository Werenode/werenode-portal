(self.webpackChunkwerenode_portal=self.webpackChunkwerenode_portal||[]).push([[1710],{63052:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Sn});var a=n(67294),r=n(82164),i=n(10412),o=n(98125),l=n(83587),s=n(11521),c=n(46839);const[d,m,p,u,g,E,h,f]=(0,s.Z)((function(e){let{appName:t}=e;const[{wallet:n,tezos:r,accountPkh:i},o]=a.useState((()=>({wallet:null,tezos:null,accountPkh:null}))),l=Boolean(r);a.useEffect((()=>c.Uw.onAvailabilityChange((e=>{o({wallet:e?new c.Uw(t):null,tezos:null,accountPkh:null})}))),[o,t]);const s=a.useCallback((async(e,t)=>{try{if(!n)throw new Error("Thanos Wallet not available");await n.connect(e,t);const a=n.toTezos(),r=await a.wallet.pkh();o({wallet:n,tezos:a,accountPkh:r})}catch(a){alert("Failed to connect ThanosWallet: "+a.message)}}),[o,n]),d=a.useCallback((async(e,t)=>{try{if(!n)throw new Error("Thanos Wallet not available");await n.reconnect(e,t);const a=n.toTezos(),r=await a.wallet.pkh();o({wallet:n,tezos:a,accountPkh:r})}catch(a){alert("Failed to reconnect ThanosWallet: "+a.message)}}),[o,n]);return{wallet:n,tezos:r,accountPkh:i,ready:l,connect:s,setState:o,reconnect:d}}),(e=>e.wallet),(e=>e.tezos),(e=>e.accountPkh),(e=>e.ready),(e=>e.connect),(e=>e.setState),(e=>e.reconnect));var v=n(4118);const Z="KT1S1HwknQzinmvQjay3BiNDmw4wq8H1nqNa",x="tz1TQyYUuFbAroVARwhh5Fgqu2JE9HrvNi3a";class w{constructor(e,t,n,a,r){this.pid=e,this.pmng=t,this.powner=n,this.ptoken_id=a,this.pdata=r}}const y={owner:{label:"Owner",hash:"owner",desc:"Address of the Tezos account that owns the EVSE(s)."},id:{label:"Identifier",hash:"identifier",desc:"Identifier of the EVSE(s)."},nb:{label:"Number of EVSE(s)",hash:"number-of-evses",desc:"Number of EVSEs to declare."},evseserver:{label:"EVSE Server",hash:"evse-manager-server",desc:"EVSE Manager Server.",items:[{value:"werenode",label:"Werenode Server"}]},supervision:{label:"Type",hash:"type",desc:"Type of supervision",items:[{value:"wherenodeocpp16",label:"Werenode - OCPP 1.6"},{value:"wherenodeocpp20",label:"Werenode - OCPP 2.0"},{value:"werenoderpcget",label:"Werenode - RPC GET"}]},switchon:{label:"Url to switch on",hash:"switch-on-url",desc:"Url to switch EVSE on"},switchoff:{label:"Url to switch off",hash:"switch-off-url",desc:"Url to switch EVSE off"},connectormode:{label:"Mode",hash:"connector-mode",desc:"Mode for connector",items:[{value:"ac1",label:"Alternating - Monophased"},{value:"ac3",label:"Alternating - Triphased"},{value:"dc400",label:"Direct Courant - 400V"},{value:"dc800",label:"Direct Courant - 800V"},{value:"ind",label:"Inductive"}]},power:{label:"Power",hash:"connector-power",desc:"Connector power",items:[{value:2,label:"2kw"},{value:3,label:"3kw"},{value:7,label:"7kw"},{value:11,label:"11kw"},{value:22,label:"22kw"},{value:43,label:"43kw"},{value:50,label:"50kw"}]},connectortype:{label:"Type",hash:"connector-type",desc:"Connecter type",items:[{value:0,label:"Female domestic A"},{value:1,label:"Female domestic B"},{value:2,label:"Female domestic C"},{value:3,label:"Female domestic D"},{value:4,label:"Female domestic EF Schuko"},{value:5,label:"Female domestic G"},{value:6,label:"Female domestic H"},{value:7,label:"Female domestic I"},{value:8,label:"Female domestic J"},{value:9,label:"Female domestic K"},{value:10,label:"Female domestic L"},{value:11,label:"Female domestic M"},{value:12,label:"Female domestic N"},{value:13,label:"Female domestic O"},{value:14,label:"Female IEC 60309 one-phase blue 16A"},{value:15,label:"Female IEC 60309 three-phase red 16A"},{value:16,label:"Female IEC 60309 three-phase red 32A"},{value:17,label:"Female IEC 60309 three-phase red 63A"},{value:18,label:"Male type 1 with cable"},{value:19,label:"Female type 2"},{value:20,label:"Male type 2 with cable"},{value:21,label:"Male Tesla with cable"},{value:22,label:"Female type 3"},{value:23,label:"Combo type 1 with cable"},{value:24,label:"Combo type 2 with cable"},{value:25,label:"Male Tesla DC with cable"},{value:26,label:"Chademo with cable"}]},price:{label:"Price per minute",hash:"price-per-minute",desc:"Price per minute"},currency:{label:"Currency",hash:"currency",desc:"Currency",items:[{value:"euro",label:"EUR"}]},index:{label:"Index",hash:"index",desc:"Connector index"},freeusers:{label:"Free users",hash:"free-users",desc:"Free users"},freeuser:{label:"Free user account",hash:"free-users",desc:"Free user account address"},gps:{label:"GPS",hash:"gps-coordinate",desc:"GPS coordinate"}},A=e=>"wherenodeocpp16"===e||"wherenodeocpp20"===e,b=e=>{let t={};for(let n=0;n<y[e].items.length;n++)t[y[e].items[n].value]=y[e].items[n].label;return t};const[P,C]=(0,s.Z)((function(){const[e,t]=(0,a.useState)({data:[],shouldLoadData:!0,message:""}),n=(0,a.useCallback)((async(e,n)=>{try{const a=await e.wallet.at(Z),r=await a.storage(),i=await r.evsemanager.get(x),o=await Promise.all(i.evses.map((async e=>await r.evse.get(e))));t((e=>({...e,data:o.map(((e,t)=>({id:i.evses[t],data:e}))).filter((e=>e.data.evse_owner===n)).map((t=>{let n;try{n=JSON.parse((0,v.l9)(t.data.evse_data))}catch(e){n={}}return{id:t.id,setting:{id:t.id,evseserver:y.evseserver.label,supervision:n.supervision||{type:"wherenodeocpp16"},connectors:n.connectors||[],freeusers:n.freeusers||[],gps:n.gps||n.location}}}))})))}catch(a){alert("An error occurs while loading data"),console.log(""+a.message)}})),r=(0,a.useCallback)((async(e,n)=>{t((e=>({...e,message:"Encrypting data"}))),n.pdata=(0,v.iF)(JSON.stringify(n.pdata));const a=await e.wallet.at(Z);t((e=>({...e,message:"May take several time to add "+n.pid})));const r=await a.methods.add_evse([n]).send();t((e=>({...e,message:"Waiting for confirmation"}))),await r.confirmation(),t((e=>({...e,message:"Evse "+n.pid+" added successfully"})))})),i=(0,a.useCallback)((async(e,n)=>{if(!(e=>{return!!(e.pid&&e.powner&&e.pmng&&(t=e.pdata,t.supervision&&t.connectors&&0!==t.connectors.length));var t})(n))return void console.log("Empty field");t((e=>({...e,message:"Encrypting data"}))),n.pdata=(0,v.iF)(JSON.stringify(n.pdata));const a=await e.wallet.at(Z);t((e=>({...e,message:"May take several time to update "+n.pid})));const r=await a.methods.update_evse([n]).send();t((e=>({...e,message:"Waiting for confirmation"}))),await r.confirmation(),t((e=>({...e,message:"Evse "+n.pid+" updated successfully"})))})),o=(0,a.useCallback)((async(e,n)=>{const a=await e.wallet.at(Z);t((e=>({...e,message:"May take several time to remove "+n})));const r=await a.methods.remove_evse([n]).send();t((e=>({...e,message:"Waiting for confirmation"}))),await r.confirmation(),t((e=>({...e,message:"Evse "+n+" removed successfully"})))}));return{evses:e,setEvses:t,retrieveEvsesFromStorage:n,addEvse:r,updateEvse:i,removeEvse:o}}));var S=n(50442),k=n(82067),O=n(38368),T=n(60424),I=n(46796);const V=[{id:0,title:"Dashboard",icon:a.createElement(S.Z,{style:{color:"white"}})},{id:1,title:"EVSEs",icon:a.createElement(I.Z,{style:{color:"white"}})},{id:2,title:"Account",icon:a.createElement(k.Z,{style:{color:"white"}})},{id:3,title:"Export",icon:a.createElement(O.Z,{style:{color:"white"}})},{id:4,title:"Help",icon:a.createElement(T.Z,{style:{color:"white"}})}],N="EVSEs",F=e=>10*V.length+e,U=e=>e-10*V.length;const[D,L]=(0,s.Z)((function(){const[e,t]=(0,a.useState)(0),[n,r]=a.useState(!1),[i,o]=a.useState(!1);return{panel:e,setPanel:e=>{t(e),e>=F(0)&&i&&!n&&r(!0)},openevses:n,setOpenEvses:r,open:i,setOpen:o}}));const[B,j]=(0,s.Z)((function(){const[e,t]=(0,a.useState)(!1),[n,r]=(0,a.useState)(null);return{select:e,setSelect:t,selected:n,setSelected:r}})),z=e=>{const t=e.length,n=e.startsWith("tz1");return 36===t&&n},H=e=>"1"<=e&&e<="9"||("A"<=e&&e<="H"||("J"<=e&&e<="N"||("P"<=e&&e<="Z"||("a"<=e&&e<="k"||"m"<=e&&e<="z")))),q=e=>"0"<=e&&e<="9"||"."===e;const[R,W]=(0,s.Z)((function(){const[e,t]=(0,a.useState)({edition:!1,showerrors:!1,owner:"",id:"",nb:1,evseserver:"werenode",supervision:{type:"wherenodeocpp16"},connectors:[],freeusers:[],openaddaddress:!1,addConnector:()=>0,isInvalidIndex:()=>0,addFreeUser:()=>0,open:!1,connectormode:"ac1",power:2,connectortype:0,price:"0",index:1,currency:"euro",connectoredit:-1,edit:!1,showMessageBox:!1});return{data:e,setData:t,setShowErrors:e=>{t((t=>({...t,showerrors:e})))},setOwner:e=>{t((t=>({...t,edition:!0,owner:e})))},setId:e=>{e.length<=6&&t((t=>({...t,edition:!0,id:Array.from(e).filter(H).join("")})))},setNb:e=>{e>=1&&t((t=>({...t,edition:!0,nb:e})))},setSupervision:e=>{t("werenoderpcget"===e?e=>({...e,edition:!0,supervision:{type:"werenoderpcget",switchon:"",switchoff:""}}):t=>({...t,edition:!0,supervision:{type:e}}))},setLogin:e=>{t((t=>({...t,edition:!0,supervision:{...t.supervision,login:e}})))},setPwd:e=>{t((t=>({...t,edition:!0,supervision:{...t.supervision,pwd:e}})))},setSwitchOn:e=>{t((t=>({...t,edition:!0,supervision:{...t.supervision,switchon:e}})))},setSwitchOff:e=>{t((t=>({...t,edition:!0,supervision:{...t.supervision,switchoff:e}})))},setOpen:e=>{t((t=>({...t,edition:!0,open:e})))},setPrice:e=>{t((t=>({...t,edition:!0,price:Array.from(e).filter(q).join("")})))},setIndex:e=>{e>=1&&t((t=>({...t,edition:!0,index:e})))},setAddConnector:e=>{t((t=>({...t,addConnector:e})))},setIsInvalidIndex:e=>{t((t=>({...t,isInvalidIndex:e})))},rmConnector:e=>{t((t=>({...t,edition:!0,connectors:t.connectors.filter((t=>t.index!==e))})))},editConnector:e=>{t((t=>{const n=t.connectors.find((t=>t.index===e));return{...t,edition:!0,open:!0,connectoredit:n.index,index:parseInt(n.index),connectormode:n.mode,power:n.power,connectortype:n.type,price:n.price,currency:n.currency}}))},setConnectorEdit:e=>{t((t=>({...t,edition:!0,connectoredit:e})))},setOpenAddAddress:e=>{t((t=>({...t,edition:!0,openaddaddress:e})))},setAddFreeUsers:e=>{t((t=>({...t,addFreeUser:e})))},setEdit:e=>{t((t=>({...t,edit:e})))},setShowMessageBox:e=>{t((t=>({...t,showMessageBox:e})))}}}));const[X,M]=(0,s.Z)((function(){const[e,t]=(0,a.useState)([]);return{settings:e,setSettings:t,createSettings:e=>{t(Array.from(Array(parseInt(e.nb)),((t,n)=>({id:e.id+" "+(n+1),owner:e.owner,evseserver:e.evseserver,supervision:e.supervision,connectors:e.connectors,freeusers:e.freeusers,gps:""}))))},setSetting:e=>n=>a=>{t((t=>t.map(((t,r)=>r==e?(t[n]=a,t):t))))}}})),G={appname:"My Evses",login:{title:"Werenode EVSE manager",purpose:"Add, remove, edit your EVSE(s) and earn WRC tokens",connect:"Login with wallet account:",nowallet:"Temple wallet is not installed, click below to install and refresh this page:",button:"Connect to Temple wallet",install:"go to temple wallet site"}};var K=n(59753),Q=n(48739),J=n(38513),Y=n(69480),_=n(90648),$=n(34276),ee=n(39960);const te=(0,_.Z)({paper:{paddingLeft:"20px",paddingRight:"20px",paddingTop:"30px",paddingBottom:"20px",marginLeft:"20px",marginRight:"20px",borderColor:"#34383e",borderWidth:"1px",borderStyle:"solid"},grid:{height:"100%"},title:{fontWeight:"bold"},purpose:{color:"grey",marginBottom:"40px"},connect:{marginBottom:"0px"},login:{padding:"12px"}}),ne=e=>{const t=te(),n=E(),r=a.useCallback((async()=>{try{await n("mainnet",{forcePermission:!0})}catch(e){alert(e.message)}}),[n]);return a.createElement(K.ZP,{item:!0,container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:1},a.createElement(K.ZP,{item:!0},a.createElement(Q.Z,{className:t.connect},G.login.connect)),a.createElement(K.ZP,{item:!0},a.createElement(J.Z,{disabled:e.disabled,variant:"outlined",style:{width:e.width+"px",padding:"12px"},onClick:r},G.login.button)))},ae=e=>{const t=te();return a.createElement(K.ZP,{item:!0,container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:1},a.createElement(K.ZP,{item:!0},a.createElement(Q.Z,{className:t.connect},G.login.connect)),a.createElement(K.ZP,{item:!0},a.createElement(Q.Z,{variant:"caption",className:t.purpose},G.login.nowallet)),a.createElement(K.ZP,{item:!0},a.createElement(ee.Z,{to:"https://templewallet.com/",style:{textDecoration:"none"}},a.createElement(J.Z,{disabled:e.disabled,variant:"contained",style:{color:"white",backgroundColor:"#ed8936",width:e.width+"px",padding:"12px"},endIcon:a.createElement($.Z,null)},G.login.install))))},re=e=>{const t=te(),n=m(),r=Math.min(e.width-80,500);return a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",className:t.grid},a.createElement(K.ZP,{item:!0,style:{paddingBottom:"10%"}},a.createElement(Y.Z,{className:t.paper,elevation:0},a.createElement(K.ZP,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},a.createElement(K.ZP,{item:!0},a.createElement(Q.Z,{className:t.title},G.login.title)),a.createElement(K.ZP,{item:!0,style:{marginBottom:"40px"}},a.createElement(Q.Z,{variant:"caption",className:t.purpose},G.login.purpose)),n?a.createElement(ne,{width:r,disabled:!1}):a.createElement(ae,{width:r,disabled:!1})))))};var ie=n(83831),oe=n(4662),le=n(68736),se=n(63609),ce=n(65782),de=n(47187),me=n(72276),pe=n(89875),ue=n(66735),ge=n(79798),Ee=n(69394),he=n(73390),fe=n(87462),ve=n(99985),Ze=n(89039),xe=n(94771),we=n(57205),ye=n(46782),Ae=n(7318),be=n(90704),Pe=n(82843),Ce=n(60551),Se=n(44996),ke=n(90222),Oe=n(16984),Te=n(77071),Ie=n(6698);const Ve={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,width:"300px",wordBreak:"all"},Ne=e=>{let{message:t}=e;return a.createElement(K.ZP,{container:!0,sx:Ve,direction:"column",alignItems:"center",justifyContent:"center"},a.createElement(K.ZP,{item:!0},a.createElement(Ie.Z,{variant:"indeterminate",sx:{color:"#00B1A5"}})),a.createElement(K.ZP,{item:!0},a.createElement(Q.Z,{variant:"caption"},t?""+t:"Loading data...")))};const[Fe,Ue]=(0,s.Z)((function(e){let{apiKey:t}=e;const[n,r]=(0,a.useState)(!1),i=(0,a.useCallback)((()=>{if(document.getElementById("scriptLoader"))return console.log("JS API is already loaded"),void r(!0);if(!n){let e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key="+t+"&libraries=places&callback=init",e.async=!0,e.id="scriptLoader",window.init=()=>{console.log("JS API is loaded and available")},document.head.appendChild(e),r(!0)}}));return{isGoogleApiLoaded:n,loadGoogleScript:i}})),De=(0,_.Z)({tools:{width:"100%",height:"64px",borderTopStyle:"solid",borderColor:"#34383e",borderWidth:"1px",paddingRight:"24px"},evse:{width:"200px",height:"300px",borderColor:"#34383e",borderWidth:"1px",borderStyle:"solid"},selected:{width:"200px",height:"300px",borderColor:"rgba(0, 177, 165, 1)",borderWidth:"2px",borderStyle:"solid"},icons:{borderTop:"1px solid #34383e",borderBottom:"1px solid #34383e",paddingLeft:"8px"},icon:{marginTop:"6px",marginRight:"4px",marginLeft:"4px"},connector:{borderBottom:"1px solid #34383e",padding:"8px"}}),Le=e=>{const t=De();return a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",className:t.connector},a.createElement(K.ZP,{item:!0}," ",a.createElement(Te.Z,{fontSize:"small"})),a.createElement(K.ZP,{item:!0}," ",a.createElement(Q.Z,{variant:"subtitle2"},e.data.index+":")),a.createElement(K.ZP,{item:!0,xs:12,style:{paddingLeft:"12px"}},a.createElement(Q.Z,{variant:"subtitle2"},b("power")[e.data.power])),a.createElement(K.ZP,{item:!0,xs:12,style:{paddingLeft:"12px"}},a.createElement(Q.Z,{variant:"subtitle2"},b("connectormode")[e.data.mode])))},Be=e=>{const{setPanel:t}=L(),{select:n,selected:r,setSelected:i}=j(),{evses:o}=C(),l=De(),s=e.data,c=F(((e,t)=>e.map((e=>e.id)).indexOf(t))(o.data,s.id)),d=(0,oe.Z)();return a.createElement(ye.Z,{className:n&&r===s.id?l.selected:l.evse,onClick:()=>{n?r===e.data.id?i(null):i(e.data.id):t(c)}},a.createElement(K.ZP,{container:!0,direction:"column",justifyContent:"flex-start",alignContent:"center",style:{height:"300px"}},a.createElement(K.ZP,{item:!0,style:{padding:"12px"}},a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center"},a.createElement(K.ZP,{item:!0,xs:12},a.createElement(Q.Z,null,s.id)),a.createElement(K.ZP,{item:!0,xs:12},a.createElement(Q.Z,{variant:"subtitle2"},b("supervision")[s.setting.supervision.type])))),a.createElement(K.ZP,{item:!0},a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",className:l.icons},a.createElement(K.ZP,{item:!0},a.createElement(ke.Z,{fontSize:"small",style:{color:d.palette.action.hover},className:l.icon})),a.createElement(K.ZP,{item:!0},a.createElement(Oe.Z,{fontSize:"small",style:{color:d.palette.action.disabled},className:l.icon})))),s.setting.connectors.map(((e,t)=>a.createElement(K.ZP,{key:"connector-"+s.id+"-"+t,item:!0},a.createElement(Le,{data:e}))))))},je=e=>{const{evses:t,setEvses:n,retrieveEvsesFromStorage:r}=C(),i=(0,oe.Z)(),o=p(),l=u(),{data:s,setShowMessageBox:c}=W();return(0,a.useEffect)((()=>{if(!t.shouldLoadData)return;(async()=>{c(!0),await r(o,l),n((e=>({...e,shouldLoadData:!1,message:""}))),c(!1)})()}),[t.shouldLoadData]),s.showMessageBox?a.createElement(Ne,{message:t.message}):a.createElement(Ce.Z,{maxWidth:"lg",style:{marginTop:"40px",height:e.height}},0===t.data.length?a.createElement(K.ZP,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",style:{height:"70%"}},a.createElement(K.ZP,{item:!0},a.createElement("img",{src:(0,Se.Z)("img/werenode_logo_no_name_250px_black.png"),alt:"werenode logo",style:{width:"150px",marginBottom:"20px"}})),a.createElement(K.ZP,{item:!0},a.createElement(Q.Z,{variant:"subtitle1",style:{color:i.palette.grey.A700}},"Click 'ADD' below to add an EVSE."))):a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:4,style:{paddingBottom:"40px"}},t.data.map((e=>a.createElement(K.ZP,{item:!0,key:e.id},a.createElement(Be,{data:e}))))))},ze=["Add","Edit","Remove","Sort"],He=e=>{const t=a.useRef(null),[n,r]=a.useState(!1),[i,o]=a.useState(!1),{selected:l,setSelect:s,setSelected:c}=j(),{setSettings:d}=M(),{setPanel:m}=L(),{setEdit:u,setShowMessageBox:g,data:E}=W(),{evses:h,setEvses:f,removeEvse:v}=C(),Z=p(),x=e=>{t.current&&t.current.contains(e.target)||r(!1)};return a.createElement(K.ZP,{item:!0},E.showMessageBox?null:a.createElement(ve.Z,{variant:"contained",ref:t,"aria-label":"split button"},a.createElement(J.Z,{onClick:()=>{switch(e.selectedIndex){case 3:f((e=>{let t;return t=i?e.data.sort(((e,t)=>e.id>t.id?1:-1)):e.data.sort(((e,t)=>e.id<t.id?1:-1)),{...e,data:t}})),o((e=>!e));break;case 2:if(l){console.log("removing");(async()=>{try{g(!0),await v(Z,l),f((e=>({...e,shouldLoadData:!0}))),g(!1)}catch(e){alert("An error occurs while removing "+e.message),g(!1),f((e=>({...e,shouldLoadData:!0,message:""})))}})()}e.setSelectedIndex(0),c(null),s(!1);break;case 1:if(l){u(!0);const e=h.data.filter((e=>l===e.id)).map((e=>e.setting));d(e),m(-1)}break;case 0:m(-1)}}},ze[e.selectedIndex]),a.createElement(J.Z,{size:"small","aria-controls":n?"split-button-menu":void 0,"aria-expanded":n?"true":void 0,"aria-label":"select EVSE action","aria-haspopup":"menu",onClick:()=>{r((e=>!e))}},a.createElement(Ze.Z,null))),a.createElement(Ae.Z,{open:n,anchorEl:t.current,role:void 0,transition:!0,disablePortal:!0},(t=>{let{TransitionProps:n,placement:i}=t;return a.createElement(we.Z,(0,fe.Z)({},n,{style:{transformOrigin:"bottom"===i?"center top":"center bottom"}}),a.createElement(Y.Z,{style:{backgroundColor:"#242526"}},a.createElement(xe.Z,{onClickAway:x},a.createElement(Pe.Z,{id:"split-button-menu"},ze.map(((t,n)=>a.createElement(be.Z,{key:t,disabled:!1,selected:n===e.selectedIndex,onClick:t=>((t,n)=>{e.setSelectedIndex(n),r(!1),1===n||2===n?s(!0):(c(null),s(!1))})(0,n)},t)))))))})))},qe=()=>{const e=De(),[t,n]=a.useState(0);return a.createElement("div",{className:e.tools},a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-end",alignItems:"center",style:{height:"100%"}},a.createElement(He,{selectedIndex:t,setSelectedIndex:n})))},Re=e=>{const t=e.height-64,{isGoogleApiLoaded:n,loadGoogleScript:r}=Ue();return(0,a.useEffect)((()=>{n||r()}),[]),a.createElement(K.ZP,{container:!0,direction:"column-reverse",justifyContent:"space-between",alignItems:"center",style:{height:e.height}},a.createElement(K.ZP,{item:!0,style:{width:"100%"}},a.createElement(qe,null)),a.createElement(K.ZP,{item:!0,style:{width:"100%",maxHeight:t,overflow:"auto"}},a.createElement(je,{height:t})))};var We=n(32371),Xe=n(40082),Me=n(10201),Ge=n(62424),Ke=n(94575),Qe=n(69946),Je=n(32749),Ye=n(33502),_e=n(98589);const $e=(0,ie.ZP)(Je.Z)((e=>{let{theme:t}=e;return{["& ."+Ye.Z.root+" ."+Ye.Z.notchedOutline]:{borderColor:"#34383e"},["&:hover ."+Ye.Z.root+" ."+Ye.Z.notchedOutline]:{borderColor:"white"},["& ."+Ye.Z.root+"."+Ye.Z.focused+" ."+Ye.Z.notchedOutline]:{borderColor:t.palette.primary.main},["& ."+Ye.Z.input]:{color:"white"},["&:hover ."+Ye.Z.input]:{color:"white"},["& ."+Ye.Z.root+"."+Ye.Z.focused+" ."+Ye.Z.input]:{color:"white"},["& ."+_e.Z.outlined]:{color:t.palette.text.secondary},["&:hover ."+_e.Z.outlined]:{color:"white"},["& ."+_e.Z.outlined+"."+_e.Z.focused]:{color:t.palette.primary.main}}}));var et=n(44020),tt=n(10543);const nt=(0,ie.ZP)(tt.Z)((e=>{let{theme:t}=e;return{["& ."+Ye.Z.root+" ."+Ye.Z.notchedOutline]:{borderColor:"#34383e"},["&:hover ."+Ye.Z.root+" ."+Ye.Z.notchedOutline]:{borderColor:"white"},["& ."+Ye.Z.root+"."+Ye.Z.focused+" ."+Ye.Z.notchedOutline]:{borderColor:t.palette.primary.main},["& ."+Ye.Z.input]:{color:"white"},["&:hover ."+Ye.Z.input]:{color:"white"},["& ."+Ye.Z.root+"."+Ye.Z.focused+" ."+Ye.Z.input]:{color:"white"},["& ."+_e.Z.outlined]:{color:t.palette.text.secondary},["&:hover ."+_e.Z.outlined]:{color:"white"},["& ."+_e.Z.outlined+"."+_e.Z.focused]:{color:t.palette.primary.main}}}));var at=n(86005);const rt=(0,ie.ZP)(at.Z)((e=>{let{theme:t}=e;return{["& ."+Ye.Z.root+" ."+Ye.Z.notchedOutline]:{borderColor:"#34383e"},["&:hover ."+Ye.Z.root+" ."+Ye.Z.notchedOutline]:{borderColor:"white"},["& ."+Ye.Z.root+"."+Ye.Z.focused+" ."+Ye.Z.notchedOutline]:{borderColor:t.palette.primary.main},["& ."+Ye.Z.input]:{color:"white"},["&:hover ."+Ye.Z.input]:{color:"white"},["& ."+Ye.Z.root+"."+Ye.Z.focused+" ."+Ye.Z.input]:{color:"white"},["& ."+_e.Z.outlined]:{color:t.palette.text.secondary},["&:hover ."+_e.Z.outlined]:{color:"white"},["& ."+_e.Z.outlined+"."+_e.Z.focused]:{color:t.palette.primary.main}}}));var it=n(83065),ot=n(69592);const lt=(0,ie.ZP)((e=>{let{className:t,...n}=e;return a.createElement(it.Z,(0,fe.Z)({},n,{classes:{popper:t},placement:"right-start"}))}))((e=>{let{theme:t}=e;return{["& ."+ot.Z.tooltip]:{backgroundColor:"#000"}}})),st=e=>{const t=window.location.protocol+"//"+window.location.host+(0,Se.Z)("docs/myevsesmanual#"+y[e.identifier].hash),n=e.error?"10px":"32px";return a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",style:{width:"100%",marginBottom:n}},a.createElement(K.ZP,{item:!0,children:e.element,style:{width:"calc(100% - 64px)"}}),a.createElement(K.ZP,{item:!0,style:{marginLeft:"12px",marginRight:"32px"}},a.createElement(lt,{title:a.createElement(a.Fragment,null,a.createElement(Q.Z,{variant:"caption"},y[e.identifier].desc),a.createElement(J.Z,{size:"small",variant:"text",style:{fontSize:"10px"},onClick:()=>{window.open(t,"My EVSEs User Manual")}},"Learn more..."))},a.createElement(T.Z,{fontSize:"small"}))))},ct=e=>{const{data:t,setData:n}=W();return a.createElement(st,{identifier:e.identifier,element:a.createElement(nt,{style:{width:"100%"}},a.createElement(et.Z,null,y[e.identifier].label),a.createElement($e,{id:"evses"+e.identifier+e.extraid,label:y[e.identifier].label,value:void 0!==e.getValue?e.getValue:t[e.identifier],onChange:void 0!==e.handleChange?e.handleChange:function(t){n((n=>(n[e.identifier]=t.target.value,{...n,edition:!0})))}},y[e.identifier].items.map((e=>a.createElement(be.Z,{key:e.value,value:e.value},e.label)))))})},dt=e=>{const{data:t,setData:n}=W();const r=!!t.showerrors&&(()=>{let n;n=void 0!==e.getValue?e.getValue:t[e.identifier];let a=!1;return void 0!==e.isError&&e.isError(n)&&(a=!0),void 0===n||""===n||a})();return a.createElement(st,{identifier:e.identifier,error:r,element:a.createElement(rt,{id:"evses"+e.identifier+(void 0!==e.extraid?e.extraid:""),label:y[e.identifier].label,color:"primary",variant:"outlined",value:void 0!==e.getValue?e.getValue:t[e.identifier],onChange:void 0!==e.handleChange?e.handleChange:function(t){n((n=>(n[e.identifier]=t.target.value,{...n,edition:!0})))},type:e.type,fullWidth:!0,error:r,helperText:r?e.errorText:""})})};var mt=n(83313),pt=n(59067),ut=n(28428),gt=n(96650),Et=n(92201),ht=n(82500),ft=n(80106),vt=n(3025),Zt=n(41472),xt=n(64566),wt=n(48837),yt=n(37054),At=n(52263);const bt={width:"400px",height:"400px",fontDisplay:"auto",borderRadius:"10px"},Pt={lat:48.709445,lng:2.1661629},Ct=e=>{let{location:t,setLocation:n,evseId:r}=e;const{siteConfig:{customFields:i}}=(0,At.Z)(),[o,l]=(0,a.useState)(Pt),[s,c]=(0,a.useState)(!0),[d,m]=(0,a.useState)(null);(0,a.useEffect)((()=>{p()&&l(t)}),[t]);const p=()=>!(0===t.lat||0===t.lng),u=()=>c((e=>!e));return a.createElement(yt.b6,{googleMapsApiKey:i.googleApiKey,mapContainerStyle:bt,zoom:18,center:o},a.createElement(yt.Jx,{position:p(t)?t:Pt,draggable:!0,onDragEnd:e=>(e=>{p()&&(n({lat:e.latLng.lat(),lng:e.latLng.lng()}),l(e.latLng))})(e),onLoad:e=>m(e),onClick:u}),s&&a.createElement(yt.nx,{anchor:d,onCloseClick:u},a.createElement("div",{style:{color:"black"}},a.createElement("span",null,"Evse : ",a.createElement("strong",null,r)),a.createElement("br",null),"lat : "+t.lat,a.createElement("br",null),"lng : "+t.lng)))};var St=n(20275),kt=n(52720);const Ot=()=>{const{settings:e}=M(),[t,n]=(0,a.useState)(""),[r,i]=(0,a.useState)(function(){if(!e[0].gps||!e[0].gps.includes(","))return{lat:0,lng:0};const t=e[0].gps.split(",");return{lat:+t[0],lng:+t[1]}}()),[o,l]=(0,a.useState)("Enter an address"),{isGoogleApiLoaded:s,loadGoogleScript:c}=Ue(),[d,m]=(0,a.useState)(!0),p=()=>m((e=>!e));(0,a.useEffect)((()=>{s||c()}),[]),(0,a.useEffect)((()=>{e[0].gps&&0!==r.lat&&0!==r.lng&&(e[0].gps=r.lat+" , "+r.lng,n(r.lat+" , "+r.lng))}),[r]);return s?a.createElement(K.ZP,{container:!0},a.createElement(K.ZP,{item:!0,xs:12,position:"relative"},a.createElement(wt.ZP,{value:t,onChange:n,onSelect:()=>{(0,wt.NU)(t).then((e=>(0,wt.WV)(e[0]))).then((e=>{i({lat:e.lat,lng:e.lng}),l("First enter an address"),console.log(e.lat+", "+e.lng)})).catch((e=>{console.log("Error "+e)}))},onError:(e,t)=>{console.log("status "+e),t(),n(""),l(""+e),i({lat:0,lng:0})}},(e=>t=>{let{getInputProps:n,suggestions:r,getSuggestionItemProps:i,loading:o}=t;return a.createElement(K.ZP,{container:!0,direction:"column"},a.createElement(st,{identifier:"gps",element:a.createElement(rt,(0,fe.Z)({helperText:e},n({name:"GPS",label:"GPS"})))}),a.createElement(K.ZP,{item:!0,container:!0,direction:"column",position:"absolute",top:"70%",zIndex:1,alignItems:"left"},o&&a.createElement("div",null,"Loading..."),r.filter((e=>e.index<=10)).map((e=>{return a.createElement(K.ZP,(0,fe.Z)({item:!0,key:"idx-"+e.index+"-"+e.placeId},i(e,{style:(t=e.active,{backgroundColor:t?"#00B1A5":"#f2f3f4",fontFamily:"Roboto, Arial, sans-serif",cursor:"pointer",color:"black",display:"flex",justifyContent:"center",alignItems:"center"})}),{width:"100%"}),a.createElement(St.Z,null),e.description);var t}))))})(o))),a.createElement(K.ZP,{item:!0,xs:12},d?a.createElement(me.Z,{onClick:p,color:"primary",sx:{height:"20px",fontSize:"0.8em"}},a.createElement(kt.Z,null),"Hide map"):a.createElement(me.Z,{onClick:p,sx:{color:"lightgray",height:"20px",fontSize:"0.8em"}},a.createElement(kt.Z,null),"Show map"),d&&a.createElement(Ct,{location:r,setLocation:i,evseId:e[0].id}))):a.createElement("span",{style:{color:"red"}},"Map mode not available")},Tt={GPS_COORDINATES:"GPS COORDINATES",MAP:"MAP",CURRENT_LOCATION:"CURRENT LOCATION"},It=[{value:1,mode:Tt.GPS_COORDINATES},{value:2,mode:Tt.MAP},{value:3,mode:Tt.CURRENT_LOCATION}],Vt=e=>{const[t,n]=(0,a.useState)(Tt.GPS_COORDINATES),{settings:r}=M(),[i,o]=(0,a.useState)(r[0].gps),[l,s]=(0,a.useState)("");(0,a.useEffect)((()=>{if(l&&s(""),t===Tt.CURRENT_LOCATION){if(!("geolocation"in navigator))return;navigator.geolocation.getCurrentPosition((e=>{o(e.coords.latitude+", "+e.coords.longitude)}),(e=>{o(""),s(e.message)}))}Tt===Tt.GPS_COORDINATES&&o(r[0].gps)}),[t]),(0,a.useEffect)((()=>{r[0].gps=i}),[i]);return a.createElement(K.ZP,{container:!0},a.createElement(K.ZP,{item:!0,xs:6},t===Tt.MAP?a.createElement(Ot,null):a.createElement(dt,{identifier:e.identifier,extraid:e.extraid,getValue:i,handleChange:e=>(e=>o(e.target.value))(e),isError:e.isError,errorText:e.errorText}),l&&a.createElement("span",{style:{color:"red"}},l)),a.createElement(K.ZP,{item:!0,xs:4},a.createElement(nt,{sx:{width:"80%"}},a.createElement(et.Z,{id:"evses"+e.identifier+e.extraid},"GPS Mode"),a.createElement($e,{id:"evses"+e.identifier+e.extraid,label:"Mode",value:t,onChange:e=>(e=>n(e.target.value))(e)},It.map((e=>a.createElement(be.Z,{key:e.value,value:e.mode},e.mode)))))))};var Nt=n(84730),Ft=n(84059);const Ut=n.p+"assets/images/werenode_footer-4928d2852be0039edefa51e28b62bac4.png";var Dt=n(43827);const Lt=e=>{let{evseName:t,evseLink:n}=e;return a.createElement("div",{className:"PDFcontainer"},a.createElement("div",null,a.createElement(me.Z,{sx:{"&:hover":{backgroundColor:"gray"},margin:"20px",border:"1px solid black",borderRadius:"50%"},onClick:()=>(()=>{const e=new Nt.ZP,n=document.getElementById("ticket-html");e.internal.pageSize.width=n.clientWidth,e.internal.pageSize.height=n.clientHeight,e.html(n,{callback:e=>e.save("Evse_"+t+".pdf"),html2canvas:{scale:.86999999}})})()},a.createElement(Dt.Z,null))),a.createElement("div",{id:"ticket-html",className:"ticket"},a.createElement("img",{src:"data:image/png;base64,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",alt:"werenode header ticket"}),a.createElement("div",{className:"container-qrcode"},a.createElement("div",{className:"qrcode-box"},a.createElement(Ft.ZP,{className:"qrcode",id:"qrCodeEl",size:180,value:""+n+t})),a.createElement("div",{className:"qrcode-info"},a.createElement("div",{className:"triangle"}),a.createElement("div",{className:"evse-name",id:"div-evse-name"},t))),a.createElement("img",{src:Ut,alt:"werenode footer ticket"})))};function Bt(e,t){switch(e){case"xs":return"xs"===t;case"sm":return"xs"===t||"sm"===t;default:return!0}}const jt=(0,_.Z)({paper:{border:"1px solid #34383e",bgcolor:"background.paper",boxShadow:10,marginLeft:"12px",marginRight:"12px"},header:{borderBottom:"1px solid #34383e",width:"100%"},buttons:{borderTop:"1px solid #34383e",padding:"24px"},title:{padding:"24px"},panel:{padding:"24px"},connectorformpanel:{paddingTop:"32px",paddingRight:"24px",paddingLeft:"24px"},connector:{border:"1px solid #34383e"},freeusers:{border:"1px solid #34383e",borderRadius:"4px",padding:"24px",position:"relative"},settings:{paddingTop:"24px",paddingLeft:"24px"}}),zt=e=>{const t=jt(),n=u(),{setOpenAddAddress:r,setAddFreeUsers:i,setData:o}=W(),l=(0,oe.Z)();a.useEffect((()=>{if(!e.freeusers.includes(n)){const t=e.freeusers.push(n);o((e=>({...e,freeusers:t})))}}),[]);let s=e.freeusers.map((t=>{return a.createElement(K.ZP,{key:t,item:!0},a.createElement(mt.Z,{variant:"outlined",onDelete:(n=t,()=>{e.rmFreeUser(n)}),label:t}));var n}));return s=s.concat([a.createElement(K.ZP,{key:"add",item:!0},a.createElement(J.Z,{onClick:()=>{i(e.addFreeUser),r(!0)}},"add address"))]),a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",className:t.freeusers},a.createElement(Q.Z,{variant:"subtitle2",style:{position:"absolute",top:"-11px",backgroundColor:l.palette.background.paper,paddingLeft:"8px",paddingRight:"8px"}},"Free access address(es)"),a.createElement(K.ZP,{item:!0,container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",spacing:2},s))},Ht=()=>{const e=jt(),{data:t,setData:n}=W();return a.createElement(K.ZP,{container:!0,direction:"column"},a.createElement(K.ZP,{item:!0,className:e.panel},a.createElement(zt,{freeusers:t.freeusers,addFreeUser:e=>{n((t=>({...t,edition:!0,freeusers:t.freeusers.filter((t=>t!==e)).concat([e])})))},rmFreeUser:e=>{n((t=>({...t,edition:!0,freeusers:t.freeusers.filter((t=>t!==e))})))}})))},qt=e=>{const t=jt();return a.createElement(K.ZP,{item:!0,key:e.identifier,xs:12},a.createElement(ye.Z,{key:e.identifier,className:t.connector},a.createElement(We.Z,null,a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},A(e.supervisiontype)?a.createElement(K.ZP,{item:!0},a.createElement(mt.Z,{variant:"outlined",icon:a.createElement(Et.Z,null),label:e.data.index})):null,a.createElement(K.ZP,{item:!0},a.createElement(mt.Z,{variant:"outlined",icon:a.createElement(Te.Z,null),label:(n=e.data.mode,b("connectormode")[n])})),a.createElement(K.ZP,{item:!0},a.createElement(mt.Z,{variant:"outlined",icon:a.createElement(Oe.Z,null),label:(e=>b("power")[e])(e.data.power)})),a.createElement(K.ZP,{item:!0},a.createElement(mt.Z,{variant:"outlined",icon:a.createElement(gt.Z,null),label:(e=>b("connectortype")[e])(e.data.type)})),a.createElement(K.ZP,{item:!0},a.createElement(mt.Z,{variant:"outlined",icon:a.createElement(ht.Z,null),label:(e=>{const t=b("currency")[e.currency];return e.price+" "+t})(e.data)})))),e.hideButtons?null:a.createElement(Xe.Z,null,a.createElement(me.Z,{onClick:()=>e.editConnector(e.data.index)},a.createElement(pt.Z,{fontSize:"small"})),a.createElement(me.Z,{onClick:()=>e.rmConnector(e.data.index)},a.createElement(ut.Z,{fontSize:"small"})))));var n},Rt=()=>{const e=jt(),{data:t,setOpen:n,rmConnector:r,editConnector:i,setData:o,setAddConnector:l,setIsInvalidIndex:s}=W(),c=()=>{o((e=>{const t={index:parseInt(e.index),mode:e.connectormode,power:e.power,type:e.connectortype,price:e.price,currency:e.currency};return-1===e.connectoredit?{...e,edition:!0,connectors:e.connectors.concat([t])}:{...e,edition:!0,connectoredit:-1,connectors:e.connectors.map((n=>n.index===e.connectoredit?t:n))}}))},d=e=>-1!==t.connectors.map((e=>e.index)).indexOf(parseInt(e)),m=(0,oe.Z)();return a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",className:e.panel,spacing:4},t.connectors.length>0?t.connectors.map(((e,n)=>a.createElement(qt,{key:"connector"+n,identifier:n,rmConnector:r,editConnector:i,supervisiontype:t.supervision.type,data:t.connectors[n],hideButtons:!1}))):a.createElement(K.ZP,{item:!0,style:{height:"150px"},container:!0,direction:"row",justifyContent:"center",alignContent:"center"},a.createElement(Q.Z,{variant:"subtitle1",style:{color:t.showerrors?m.palette.error.main:"#34383e"}},"No Connector. Click 'ADD CONNECTOR'.")),a.createElement(K.ZP,{xs:12,item:!0,container:!0,direction:"row",justifyContent:"flex-end",alignContent:"center"},a.createElement(K.ZP,{item:!0},a.createElement(J.Z,{onClick:()=>{n(!0),l(c),s(d)}},"add connector"))))},Wt=e=>{const{settings:t,setSettings:n}=M();return a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center"},a.createElement(K.ZP,{item:!0,md:12,sm:12,xs:12},a.createElement(dt,{identifier:"switchon",extraid:e.index,getValue:t[e.index].supervision.switchon,handleChange:t=>{n((n=>n.map(((n,a)=>a===e.index?{...n,supervision:{...n.supervision,switchon:t.target.value}}:n))))},errorText:"Invalid Url"})),a.createElement(K.ZP,{item:!0,md:12,sm:12,xs:12},a.createElement(dt,{identifier:"switchoff",extraid:e.index,getValue:t[e.index].supervision.switchoff,handleChange:t=>{n((n=>n.map(((n,a)=>a===e.index?{...n,supervision:{...n.supervision,switchoff:t.target.value}}:n))))},errorText:"Invalid Url"})))},Xt=()=>{const{data:e,setSwitchOn:t,setSwitchOff:n}=W();return a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center"},a.createElement(K.ZP,{item:!0,md:12,sm:12,xs:12},a.createElement(dt,{identifier:"switchon",getValue:e.supervision.switchon,handleChange:e=>t(e.target.value),errorText:"Invalid Url"})),a.createElement(K.ZP,{item:!0,md:12,sm:12,xs:12},a.createElement(dt,{identifier:"switchoff",getValue:e.supervision.switchoff,handleChange:e=>n(e.target.value),errorText:"Invalid Url"})))},Mt=()=>{const e=jt(),{data:t,setSupervision:n}=W();return a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",className:e.panel},a.createElement(K.ZP,{item:!0,sm:12,md:6,xs:12},a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center"},a.createElement(K.ZP,{item:!0,md:12,sm:12,xs:12},a.createElement(ct,{identifier:"supervision",handleChange:e=>{n(e.target.value)},getValue:t.supervision.type})),"werenoderpcget"===t.supervision.type?a.createElement(Xt,null):null)))},Gt=()=>{const e=jt(),{data:t,setData:n,setNb:r,setId:i}=W(),o=u();return a.useEffect((()=>{t.edition||n((e=>({...e,owner:o,freeusers:e.freeusers.concat([o])})))}),[]),a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",className:e.panel},a.createElement(K.ZP,{item:!0,sm:12,md:6,xs:12},a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center"},a.createElement(K.ZP,{item:!0,xs:12},a.createElement(dt,{identifier:"owner",isError:()=>!z(t.owner),errorText:"Invalid address format"})),a.createElement(K.ZP,{item:!0,xs:6},a.createElement(dt,{identifier:"id",handleChange:e=>i(e.target.value),errorText:"Empty identifier"})),a.createElement(K.ZP,{item:!0,xs:6},a.createElement(dt,{identifier:"nb",type:"number",handleChange:e=>r(e.target.value)})),a.createElement(K.ZP,{item:!0,xs:12},a.createElement(ct,{identifier:"evseserver"})))))},Kt=e=>{const t=jt(),[n,r]=a.useState(!1),{settings:i,setSettings:o,setSetting:l}=M(),{setOpen:s,setData:c,setAddConnector:d,setIsInvalidIndex:m}=W(),{evses:p}=C(),u=t=>()=>{o((n=>n.map(((n,a)=>a===e.index?{...n,connectors:n.connectors.filter(((e,n)=>n!==t))}:n))))},g=t=>{o((n=>n.map(((n,a)=>{if(a===e.index){const e={index:parseInt(t.index),mode:t.connectormode,power:t.power,type:t.connectortype,price:t.price,currency:t.currency};return-1===t.connectoredit?{...n,connectors:n.connectors.concat([e])}:{...n,connectors:n.connectors.map((n=>n.index===t.connectoredit?e:n))}}return n})))),c((e=>({...e,connectoredit:-1})))},E=t=>()=>{d(g);const n=i[e.index].connectors.find((e=>e.index===t));c((e=>({...e,edition:!0,open:!0,connectoredit:n.index,index:parseInt(n.index),connectormode:n.mode,power:n.power,connectortype:n.type,price:n.price,currency:n.currency})))},h=t=>-1!==i[e.index].connectors.map((e=>e.index)).indexOf(parseInt(t));return a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",className:t.settings},a.createElement(K.ZP,{item:!0,md:4,sm:12,xs:12},a.createElement(dt,{identifier:"id",extraid:e.index,getValue:i[e.index].id,handleChange:t=>l(e.index)("id")(t.target.value),isError:e=>-1!==p.data.map((e=>e.id)).indexOf(e),errorText:"Identifier already taken"})),a.createElement(K.ZP,{item:!0,md:6,sm:12,xs:12},a.createElement(Vt,{identifier:"gps",extraid:e.index,isError:e=>""===e,errorText:"Invalid GPS value"})),a.createElement(K.ZP,{item:!0,xs:12,style:{marginBottom:"1px"}},a.createElement(ft.Z,null,a.createElement(vt.Z,{expandIcon:a.createElement(xt.Z,null),onClick:()=>{r((e=>!e))},"aria-controls":"panel1a-content-"+e.index,id:"panel1a-header-"+e.index},a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",spacing:2},a.createElement(Q.Z,{variant:"subtitle2",style:{color:"#34383e"}},"Click to "+(n?"collapse":"expand")+" settings"))),a.createElement(Zt.Z,{style:{padding:0}},a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center"},a.createElement(K.ZP,{item:!0,sm:12,md:6,xs:12},a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center"},a.createElement(K.ZP,{item:!0,md:12,sm:12,xs:12},a.createElement(ct,{identifier:"supervision",extraid:e.index,handleChange:t=>{o((n=>n.map(((n,a)=>a===e.index?"werenoderpcget"===t.target.value?{...n,supervision:{type:t.target.value,switchon:"",switchoff:""}}:{...n,supervision:{...n.supervision,type:t.target.value}}:n))))},getValue:i[e.index].supervision.type})),"werenoderpcget"===i[e.index].supervision.type?a.createElement(Wt,{index:e.index}):null)),a.createElement(K.ZP,{item:!0,xs:12,container:!0,style:{paddingRight:"32px",marginBottom:"12px"},spacing:2},i[e.index].connectors.map(((t,n)=>a.createElement(qt,{key:"connector"+e.index+n,identifier:n,rmConnector:u(n),editConnector:E(t.index),supervisiontype:i[e.index].supervision.type,data:t})))),a.createElement(K.ZP,{item:!0,xs:12,container:!0,justifyContent:"flex-end",style:{paddingRight:"32px",marginBottom:"12px"}},a.createElement(J.Z,{onClick:()=>{s(!0),d(g),m(h)}},"add connector")),a.createElement(K.ZP,{item:!0,xs:12,style:{paddingRight:"32px",marginBottom:"32px"}},a.createElement(zt,{freeusers:i[e.index].freeusers,addFreeUser:t=>{o((n=>n.map(((n,a)=>a===e.index?{...n,freeusers:n.freeusers.filter((e=>e!==t)).concat([t])}:n))))},rmFreeUser:t=>{o((n=>n.map(((n,a)=>a===e.index?{...n,freeusers:n.freeusers.filter((e=>e!==t))}:n))))}})))))))},Qt=()=>{const{settings:e}=M();return a.createElement(K.ZP,{container:!0,direction:"row"},e.map(((e,t)=>a.createElement(K.ZP,{key:"evse"+t,xs:12,item:!0,style:{borderBottom:"1px solid #34383e"}},a.createElement(Kt,{index:t})))))},Jt=()=>{const{evses:e}=C(),{settings:t}=M();return a.createElement(K.ZP,{container:!0,direction:"column"},a.createElement(K.ZP,{item:!0,textAlign:"left",margin:"20px 20px"},a.createElement(Q.Z,null,"Data size : ",new Blob([JSON.stringify(e.data)]).size," bytes")),a.createElement(K.ZP,{item:!0,xs:12},a.createElement(Lt,{evseName:t[0].id,evseLink:"https://werenode.com/s/?evse="})))},Yt=[{title:"General Settings",panel:a.createElement(Gt,null)},{title:"Supervision",panel:a.createElement(Mt,null)},{title:"Connectors",panel:a.createElement(Rt,null)},{title:"Other Settings",panel:a.createElement(Ht,null)},{title:"Edit Settings",panel:a.createElement(Qt,null)},{title:"Validate",panel:a.createElement(Jt,null)}],_t=e=>e?[{title:"Edit Settings",panel:a.createElement(Qt,null)},{title:"Validate",panel:a.createElement(Jt,null)}]:Yt,$t=e=>{const t=jt(),{setPanel:n}=L(),{data:r}=W(),i=function(){const e=(0,oe.Z)();return[...e.breakpoints.keys].reverse().reduce(((t,n)=>{const a=(0,Qe.Z)(e.breakpoints.up(n));return!t&&a?n:t}),null)||"xs"}();return a.createElement(K.ZP,{item:!0},a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-end",alignContent:"end",className:t.buttons},a.createElement(K.ZP,{item:!0,xs:12,style:{marginBottom:"18px"}},a.createElement(Me.Z,{activeStep:e.wizardPanelIdx,orientation:Bt("sm",i)?"vertical":"horizontal"},_t(r.edit).map((e=>a.createElement(Ge.Z,{key:e.title},a.createElement(Ke.Z,null,e.title)))))),a.createElement(K.ZP,{item:!0,style:{marginRight:"18px"}},a.createElement(J.Z,{size:"small",disableElevation:!0,variant:"text",onClick:()=>{n(0)}},"Cancel")),a.createElement(K.ZP,{item:!0,style:{marginRight:"18px"}},a.createElement(J.Z,{size:"small",disableElevation:!0,disabled:0===e.wizardPanelIdx,variant:"text",onClick:()=>{e.setWizardPanel(e.wizardPanelIdx-1)}},"Previous")),a.createElement(K.ZP,{item:!0},a.createElement(J.Z,{size:"small",disableElevation:!0,variant:"contained",onClick:e.handleClick},e.wizardPanelIdx===Yt.length-1?"ok":"next"))))},en=e=>{const t=jt(),[n,r]=a.useState(0),{data:i,setShowErrors:o,setEdit:l,setData:s,setShowMessageBox:c}=W(),{createSettings:d}=M(),{setEvses:m,addEvse:g,updateEvse:E}=C(),{settings:h}=M(),{setPanel:f}=L(),{setSelect:v,setSelected:Z}=j(),y=p(),A=u();a.useEffect((()=>{i.edit&&s((e=>({...e,owner:A,id:h[0].id})))}),[]);return a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"center",alignContent:"center",style:{height:e.height}},a.createElement(K.ZP,{item:!0,lg:9,md:12},a.createElement(Y.Z,{elevation:3,className:t.paper},a.createElement(K.ZP,{container:!0,direction:"column",justifyContent:"flex-start",alignContent:"flex-start"},a.createElement(K.ZP,{item:!0,className:t.header},a.createElement(Q.Z,{variant:"h5",component:"div",className:t.title},_t(i.edit)[n].title)),a.createElement(K.ZP,{item:!0,style:{maxHeight:e.height-200,overflow:"auto"}},_t(i.edit)[n].panel),a.createElement($t,{handleClick:()=>{if(n===_t(i.edit).length-1){if(i.edit){console.log("updating");(async()=>{try{c(!0),await E(y,new w(h[0].id,x,A,0,{supervision:h[0].supervision,connectors:h[0].connectors,gps:h[0].gps})),m((e=>({...e,shouldLoadData:!0}))),c(!1)}catch(e){alert("An error occurs while updating "+e.message),c(!1),m((e=>({...e,shouldLoadData:!0,message:""})))}})()}else{console.log("Adding");(async()=>{try{c(!0),await g(y,new w(h[0].id,x,A,0,{supervision:h[0].supervision,connectors:h[0].connectors,location:h[0].gps})),m((e=>({...e,shouldLoadData:!0}))),c(!1)}catch(e){alert("An error occurs while adding "+e.message),c(!1),m((e=>({...e,shouldLoadData:!0,message:""})))}})()}f(0),l(!1),Z(null),v(!1)}else(n===Yt.length-6?""!==i.id&&z(i.owner):n===Yt.length-5?"werenoderpcget"!==i.supervision.type||void 0!==i.supervision.switchon&&void 0!==i.supervision.switchoff:!(n===Yt.length-4?0===i.connectors.length:n===Yt.length-2&&h.reduce(((e,t)=>e||""===t.gps),!1)))?(n===_t(i.edit).length-3&&d(i),o(!1),r((e=>e+1))):o(!0)},wizardPanelIdx:n,setWizardPanel:r})))))};var tn=n(501),nn=n(35025),an=n(8875),rn=n(18362),on=n(12172);const ln=e=>{let{data:t}=e;return a.createElement(K.ZP,{container:!0,width:"70%",margin:"auto",direction:"column",padding:"10px"},a.createElement(K.ZP,{item:!0,container:!0,direction:"column"},a.createElement(Q.Z,{variant:"h5",component:"div",sx:{marginBottom:"15px",display:"flex",alignItems:"center"}},a.createElement(rn.Z,{sx:{margin:"0px 8px  0px 0px"}}),"EVSE Information"),a.createElement(K.ZP,{item:!0,border:"1px solid #34383e",position:"relative",margin:"15px 0px"},a.createElement(Q.Z,{variant:"subtitle2",style:{position:"absolute",top:"-11px",paddingLeft:"8px",paddingRight:"8px",color:"#00B1A5"}},"Supervision"),a.createElement("div",{style:{padding:"10px"}},t.setting.supervision.type)),a.createElement(K.ZP,{item:!0,border:"1px solid #34383e",position:"relative",margin:"15px 0px"},a.createElement(Q.Z,{variant:"subtitle2",style:{position:"absolute",top:"-11px",paddingLeft:"8px",paddingRight:"8px",color:"#00B1A5"}},"Gps Coordinates"),a.createElement("div",{style:{padding:"10px"}},t.setting.gps||a.createElement("span",null,"No Gps coordinates")))),a.createElement(K.ZP,{item:!0,container:!0,maxHeight:"400px",direction:"column",sx:{overflowY:"auto"}},a.createElement(Q.Z,{variant:"h5",component:"div",sx:{marginBottom:"15px",display:"flex",alignItems:"center"}},a.createElement(on.Z,{sx:{margin:"0px 8px  0px 0px"}})," Connectors"),t.setting.connectors.length>0?t.setting.connectors.map(((e,n)=>a.createElement(K.ZP,{item:!0,margin:"10px 0px",key:"index-"+n},a.createElement(qt,{key:"connector"+n,identifier:n,rmConnector:null,editConnector:null,supervisiontype:t.setting.supervision.type,data:t.setting.connectors[n],hideButtons:!0})))):a.createElement("span",null,"No connectors")))},sn=e=>({top:"61px",backgroundColor:e.palette.background.paper,borderColor:"#34383e"}),cn=e=>Object.assign({width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"},sn(e)),dn=e=>Object.assign({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:"calc("+e.spacing(7)+" + 1px)",[e.breakpoints.up("sm")]:{width:"calc("+e.spacing(9)+" + 1px)"}},sn(e)),mn=(0,ie.ZP)("div")((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:t.spacing(0,3),...t.mixins.toolbar}})),pn=(0,ie.ZP)(se.ZP,{shouldForwardProp:e=>"open"!==e})((e=>{let{theme:t,open:n}=e;return{width:240,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",...n&&{...cn(t),"& .MuiDrawer-paper":cn(t)},...!n&&{...dn(t),"& .MuiDrawer-paper":dn(t)}}})),un=(0,ie.ZP)(de.Z)({borderColor:"#34383e"}),gn=e=>{const t=u(),n=f(),{evses:r,setEvses:i}=C();let o;if(e.panel>=F(0)){const t=U(e.panel);o=r.data[t].id}else o=-1===e.panel?"Add EVSE(s)":V[e.panel].title;return a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center"},a.createElement(K.ZP,{item:!0},a.createElement(Q.Z,{variant:"h5"},o)),a.createElement(K.ZP,{item:!0},a.createElement(K.ZP,{container:!0,direction:"row",spacing:1,alignItems:"center"},a.createElement(K.ZP,{item:!0},a.createElement(Q.Z,{variant:"caption"},"Connected as"),a.createElement(me.Z,{onClick:()=>(async()=>{try{await n("mainnet",{forcePermission:!0}),i((e=>({...e,shouldLoadData:!0})))}catch(e){alert(e.message)}})()},a.createElement(an.Z,null))),a.createElement(K.ZP,{item:!0},a.createElement(Q.Z,{variant:"caption",style:{fontFamily:"Courier Prime, monospace"}},t)))))},En=e=>(a.useEffect((()=>{e.setHeaderHeight(document.getElementById("drawerheader").clientHeight)}),[]),a.createElement(mn,{id:"drawerheader"},a.createElement(gn,{panel:e.panel}))),hn=e=>{let{id:t}=e;const{evses:n}=C(),r=n.data[U(t)];return r?a.createElement(ln,{data:r}):a.createElement("div",null)};function fn(e){const t=(0,oe.Z)(),{panel:n,setPanel:r,openevses:i,setOpenEvses:o,open:l,setOpen:s}=L(),[c,d]=a.useState(0),{evses:m}=C(),p=e=>()=>{if(1===e)i?o(!1):(o(!0),l||s(!0));else r(e)},u=e=>i?n===e:n>=F(0)?1===e:n===e;return a.createElement(le.Z,{sx:{display:"flex"}},a.createElement(pn,{variant:"permanent",open:l},a.createElement(mn,null,a.createElement(me.Z,{onClick:()=>{s((e=>!e)),i?o(!1):!l&&n>=F(0)&&o(!0)},color:"inherit"},l?a.createElement(pe.Z,null):a.createElement(ue.Z,null))),a.createElement(un,null),a.createElement(ce.Z,null,V.slice(0,3).reduce(((e,r)=>{const o=a.createElement(ge.ZP,{button:!0,key:r.title,onClick:p(r.id),selected:u(r.id)},a.createElement(Ee.Z,null,r.icon),a.createElement(he.Z,{primary:r.title}),r.title===N?i?a.createElement(nn.Z,null):a.createElement(xt.Z,null):null);if(r.title===N){const r=m.data.map(((e,r)=>{const i=F(r);return a.createElement(ge.ZP,{key:i,button:!0,style:{paddingLeft:t.spacing(4)},selected:n===i,onClick:p(i)},a.createElement(he.Z,{primary:e.id}))}));return e.concat([o,a.createElement(tn.Z,{key:"collapse",in:i,timeout:"auto",unmountOnExit:!0},a.createElement(ce.Z,{component:"div",disablePadding:!0},r))])}return e.concat([o])}),[])),a.createElement(un,null),a.createElement(ce.Z,null,V.slice(3,5).map((e=>a.createElement(ge.ZP,{button:!0,key:e.title,onClick:p(e.id),selected:u(e.id)},a.createElement(Ee.Z,null,e.icon),a.createElement(he.Z,{primary:e.title})))))),a.createElement(le.Z,{component:"main",sx:{flexGrow:1},style:{height:e.height}},a.createElement(En,{panel:n,setHeaderHeight:d}),(t=>{switch(t){case-1:return a.createElement(en,{height:e.height-c});case 0:return a.createElement(Re,{height:e.height-c});default:return a.createElement(hn,{id:t})}})(n)))}var vn=n(93404);const Zn={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,p:4},xn=()=>{const{data:e,setIndex:t,setPrice:n,setOpen:r,setShowErrors:i}=W(),o=t=>e.connectoredit!==e.index&&e.isInvalidIndex(t);return a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center"},a.createElement(K.ZP,{md:8,sm:12,xs:12,item:!0},a.createElement(ct,{identifier:"connectormode"})),a.createElement(K.ZP,{md:4,sm:12,xs:12,item:!0},a.createElement(ct,{identifier:"power"})),a.createElement(K.ZP,{md:12,sm:12,xs:12,item:!0},a.createElement(ct,{identifier:"connectortype"})),a.createElement(K.ZP,{md:8,sm:12,xs:12,item:!0},a.createElement(dt,{identifier:"price",handleChange:e=>n(e.target.value),errorText:"Price not set"})),a.createElement(K.ZP,{md:4,sm:4,xs:12,item:!0},a.createElement(ct,{identifier:"currency"})),A(e.supervision.type)?a.createElement(K.ZP,{md:4,sm:4,xs:12,item:!0},a.createElement(dt,{identifier:"index",type:"number",handleChange:e=>t(e.target.value),errorText:"Index already set",isError:o})):null,a.createElement(K.ZP,{xs:12,item:!0},a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"space-between",alignContent:"flex-end"},a.createElement(K.ZP,{item:!0},a.createElement(J.Z,{onClick:()=>{r(!1)}},"cancel")),a.createElement(K.ZP,{item:!0},a.createElement(J.Z,{variant:"contained",onClick:()=>{var t;o(e.index)||""===(t=e.price)||void 0===t?i(!0):(i(!1),e.addConnector(e),r(!1))}},"ok")))))};function wn(){const{data:e,setOpen:t,setShowErrors:n}=W();return a.createElement(vn.Z,{open:e.open,onClose:()=>{t(!1),n(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},a.createElement(le.Z,{sx:Zn},a.createElement(Q.Z,{id:"modal-modal-title",variant:"h6",component:"h2",style:{marginBottom:"34px"}},"Connector settings"),a.createElement(xn,null)))}const yn={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,width:"500px",p:4,paddingBottom:"8px",paddingRight:"12px"},An=()=>{const[e,t]=a.useState(""),{data:n,setOpenAddAddress:r,setShowErrors:i}=W();return a.createElement(vn.Z,{open:n.openaddaddress,onClose:()=>{r(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},a.createElement(le.Z,{sx:yn},a.createElement(K.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center"},a.createElement(K.ZP,{item:!0,xs:12},a.createElement(dt,{identifier:"freeuser",getValue:e,handleChange:e=>t(e.target.value),isError:e=>!z(e),helperText:"Invalid address"})),a.createElement(K.ZP,{item:!0,xs:12,container:!0,direction:"row",justifyContent:"flex-end",alignContent:"center"},a.createElement(J.Z,{onClick:()=>{z(e)?(n.addFreeUser(e),r(!1),i(!1)):i(!0)}},"ok")))))},bn=e=>g()?a.createElement(fn,{height:e.height}):a.createElement(re,{width:e.width}),Pn=e=>{const t=a.useMemo((()=>(0,o.Z)({palette:{type:"dark",primary:{main:"rgba(0, 177, 165, 1)",contrastText:"white"},background:{paper:"#18191a",default:"#18191a"},text:{primary:"#fff",secondary:"rgba(255,255,255,0.7)",disabled:"grey"},info:{main:"#c7b45f"},action:{active:"rgb(255,255,255)",disabled:"#34383e",disabledBackground:"#34383e",hover:"rgba(0, 177, 165, 1)",selectedOpacity:"0.8"}}})),[!0]),{siteConfig:{customFields:n}}=(0,At.Z)();return a.createElement(l.Z,{theme:t},a.createElement(d,{appName:G.appname},a.createElement(Fe,{apiKey:n.googleApiKey},a.createElement(P,null,a.createElement(D,null,a.createElement(B,null,a.createElement(R,null,a.createElement(X,null,a.createElement("div",{style:{height:e.height+"px",width:e.width+"px"}},a.createElement(bn,{height:e.height,width:e.width})),a.createElement(wn,null),a.createElement(An,null)))))))))};function Cn(){const{innerWidth:e,innerHeight:t}=i.Z.canUseDOM?window:{innerWidth:0,innerHeight:0};return{width:e,height:t}}const Sn=()=>{const{width:e,height:t}=function(){const[e,t]=(0,a.useState)(Cn());return(0,a.useEffect)((()=>{function e(){t(Cn())}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e}();return a.createElement(r.Z,{noFooter:!0},a.createElement(Pn,{width:e,height:t-60}))}},35883:()=>{},46601:()=>{},89214:()=>{},52361:()=>{},94616:()=>{}}]);