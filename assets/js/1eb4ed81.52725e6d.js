(self.webpackChunkwerenode_portal=self.webpackChunkwerenode_portal||[]).push([[710],{8677:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return an}});var r=n(7294),i=n(6016),a=n(412),o=n(6505),c=n(330),l=n(4035),s=n(1720),u=n.n(s),d=n(1521),m=n(7364),p=(0,d.Z)((function(e){var t=e.appName,n=r.useState((function(){return{wallet:null,tezos:null,accountPkh:null}})),i=n[0],a=i.wallet,o=i.tezos,c=i.accountPkh,s=n[1],d=Boolean(o);r.useEffect((function(){return m.Uw.onAvailabilityChange((function(e){s({wallet:e?new m.Uw(t):null,tezos:null,accountPkh:null})}))}),[s,t]);var p=r.useCallback(function(){var e=(0,l.Z)(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a){e.next=3;break}throw new Error("Thanos Wallet not available");case 3:return e.next=5,a.connect(t,n);case 5:return r=a.toTezos(),e.next=8,r.wallet.pkh();case 8:i=e.sent,s({wallet:a,tezos:r,accountPkh:i}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert("Failed to connect ThanosWallet: "+e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),[s,a]);return{wallet:a,tezos:o,accountPkh:c,ready:d,connect:p}}),(function(e){return e.wallet}),(function(e){return e.tezos}),(function(e){return e.accountPkh}),(function(e){return e.ready}),(function(e){return e.connect})),f=p[0],g=p[1],h=(p[2],p[3]),E=p[4],v=p[5];var Z=(0,d.Z)((function(){var e=(0,r.useState)({data:[]});return{evses:e[0],setEvses:e[1]}})),x=Z[0],b=Z[1],w=n(442),y=n(2067),C=n(8368),P=n(424),k=n(6796),O=[{id:0,title:"Dashboard",icon:r.createElement(w.Z,{style:{color:"white"}})},{id:1,title:"EVSEs",icon:r.createElement(k.Z,{style:{color:"white"}})},{id:2,title:"Account",icon:r.createElement(y.Z,{style:{color:"white"}})},{id:3,title:"Export",icon:r.createElement(C.Z,{style:{color:"white"}})},{id:4,title:"Help",icon:r.createElement(P.Z,{style:{color:"white"}})}],j="EVSEs",S=function(e){return 10*O.length+e};var I=(0,d.Z)((function(){var e=(0,r.useState)(0),t=e[0],n=e[1],i=r.useState(!1),a=i[0],o=i[1],c=r.useState(!1),l=c[0],s=c[1];return{panel:t,setPanel:function(e){n(e),e>=S(0)&&l&&!a&&o(!0)},openevses:a,setOpenEvses:o,open:l,setOpen:s}})),F=I[0],T=I[1];var N=(0,d.Z)((function(){var e=(0,r.useState)(!1),t=e[0],n=e[1],i=(0,r.useState)([]);return{select:t,setSelect:n,selected:i[0],setSelected:i[1]}})),z=N[0],V=N[1],A=function(e){var t=e.length,n=e.startsWith("tz1");return 36==t&&n},U=function(e){return"1"<=e&&e<="9"||("A"<=e&&e<="H"||("J"<=e&&e<="N"||("P"<=e&&e<="Z"||("a"<=e&&e<="k"||"m"<=e&&e<="z"))))},B=function(e){return"0"<=e&&e<="9"||"."==e};var D=(0,d.Z)((function(){var e=(0,r.useState)({edition:!1,showerrors:!1,owner:"",id:"",nb:1,evseserver:"werenode",supervision:{type:"wherenodeocpp16"},connectors:[],freeusers:[],openaddaddress:!1,addConnector:function(){return 0},isInvalidIndex:function(){return 0},addFreeUser:function(){return 0},open:!1,connectormode:"ac1",power:2,connectortype:0,price:"0",index:1,currency:"euro",connectoredit:-1,edit:!1}),t=e[0],n=e[1];return{data:t,setData:n,setShowErrors:function(e){n((function(t){return Object.assign({},t,{showerrors:e})}))},setOwner:function(e){n((function(t){return Object.assign({},t,{edition:!0,owner:e})}))},setId:function(e){e.length<=6&&n((function(t){return Object.assign({},t,{edition:!0,id:Array.from(e).filter(U).join("")})}))},setNb:function(e){e>=1&&n((function(t){return Object.assign({},t,{edition:!0,nb:e})}))},setSupervision:function(e){n("werenoderpcget"==e?function(e){return Object.assign({},e,{edition:!0,supervision:{type:"werenoderpcget",switchon:"",switchoff:""}})}:function(t){return Object.assign({},t,{edition:!0,supervision:{type:e}})})},setLogin:function(e){n((function(t){return Object.assign({},t,{edition:!0,supervision:Object.assign({},t.supervision,{login:e})})}))},setPwd:function(e){n((function(t){return Object.assign({},t,{edition:!0,supervision:Object.assign({},t.supervision,{pwd:e})})}))},setSwitchOn:function(e){n((function(t){return Object.assign({},t,{edition:!0,supervision:Object.assign({},t.supervision,{switchon:e})})}))},setSwitchOff:function(e){n((function(t){return Object.assign({},t,{edition:!0,supervision:Object.assign({},t.supervision,{switchoff:e})})}))},setOpen:function(e){n((function(t){return Object.assign({},t,{edition:!0,open:e})}))},setPrice:function(e){n((function(t){return Object.assign({},t,{edition:!0,price:Array.from(e).filter(B).join("")})}))},setIndex:function(e){e>=1&&n((function(t){return Object.assign({},t,{edition:!0,index:e})}))},setAddConnector:function(e){n((function(t){return Object.assign({},t,{addConnector:e})}))},setIsInvalidIndex:function(e){n((function(t){return Object.assign({},t,{isInvalidIndex:e})}))},rmConnector:function(e){n((function(t){return Object.assign({},t,{edition:!0,connectors:t.connectors.filter((function(t){return t.index!==e}))})}))},editConnector:function(e){n((function(t){var n=t.connectors.find((function(t){return t.index==e}));return Object.assign({},t,{edition:!0,open:!0,connectoredit:n.index,index:parseInt(n.index),connectormode:n.mode,power:n.power,connectortype:n.type,price:n.price,currency:n.currency})}))},setConnectorEdit:function(e){n((function(t){return Object.assign({},t,{edition:!0,connectoredit:e})}))},setOpenAddAddress:function(e){n((function(t){return Object.assign({},t,{edition:!0,openaddaddress:e})}))},setAddFreeUsers:function(e){n((function(t){return Object.assign({},t,{addFreeUser:e})}))},setEdit:function(e){n((function(t){return Object.assign({},t,{edit:e})}))}}})),R=D[0],W=D[1];var L=(0,d.Z)((function(){var e=(0,r.useState)([]),t=e[0],n=e[1];return{settings:t,setSettings:n,createSettings:function(e){n(Array.from(Array(parseInt(e.nb)),(function(t,n){return{id:e.id+" "+(n+1),owner:e.owner,evseserver:e.evseserver,supervision:e.supervision,connectors:e.connectors,freeusers:e.freeusers,gps:""}})))},setSetting:function(e){return function(t){return function(r){n((function(n){return n.map((function(n,i){return i==e?(n[t]=r,n):n}))}))}}}}})),M=L[0],H=L[1],G={appname:"My Evses",login:{title:"Werenode EVSE manager",purpose:"Add, remove, edit your EVSE(s) and earn WRC tokens",connect:"Login with wallet account:",nowallet:"Temple wallet is not installed, click below to install and refresh this page:",button:"Connect to Temple wallet",install:"go to temple wallet site"}},_=n(9586),J=n(7272),X=n(5168),K=n(6112),q=n(2963),Q=n(4276),Y=n(6742),$=(0,q.Z)({paper:{paddingLeft:"20px",paddingRight:"20px",paddingTop:"30px",paddingBottom:"20px",marginLeft:"20px",marginRight:"20px",borderColor:"#34383e",borderWidth:"1px",borderStyle:"solid"},grid:{height:"100%"},title:{fontWeight:"bold"},purpose:{color:"grey",marginBottom:"40px"},connect:{marginBottom:"0px"},login:{padding:"12px"}}),ee=function(e){var t=$(),n=v(),i=r.useCallback((0,l.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("hangzhounet");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0.message);case 8:case 9:case"end":return e.stop()}}),e,null,[[0,5]])}))),[n]);return r.createElement(_.ZP,{item:!0,container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:1},r.createElement(_.ZP,{item:!0},r.createElement(J.Z,{className:t.connect},G.login.connect)),r.createElement(_.ZP,{item:!0},r.createElement(X.Z,{disabled:e.disabled,variant:"outlined",style:{width:e.width+"px",padding:"12px"},onClick:i},G.login.button)))},te=function(e){var t=$();return r.createElement(_.ZP,{item:!0,container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:1},r.createElement(_.ZP,{item:!0},r.createElement(J.Z,{className:t.connect},G.login.connect)),r.createElement(_.ZP,{item:!0},r.createElement(J.Z,{variant:"caption",className:t.purpose},G.login.nowallet)),r.createElement(_.ZP,{item:!0},r.createElement(Y.Z,{to:"https://templewallet.com/",style:{textDecoration:"none"}},r.createElement(X.Z,{disabled:e.disabled,variant:"contained",style:{color:"white",backgroundColor:"#ed8936",width:e.width+"px",padding:"12px"},endIcon:r.createElement(Q.Z,null)},G.login.install))))},ne=function(e){var t,n=$(),i=g(),a=Math.min(e.width-80,500);return r.createElement(_.ZP,((t={container:!0,direction:"row"}).direction="row",t.justifyContent="center",t.alignItems="center",t.className=n.grid,t),r.createElement(_.ZP,{item:!0,style:{paddingBottom:"10%"}},r.createElement(K.Z,{className:n.paper,elevation:0},r.createElement(_.ZP,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},r.createElement(_.ZP,{item:!0},r.createElement(J.Z,{className:n.title},G.login.title)),r.createElement(_.ZP,{item:!0,style:{marginBottom:"40px"}},r.createElement(J.Z,{variant:"caption",className:n.purpose},G.login.purpose)),i?r.createElement(ee,{width:a,disabled:!1}):r.createElement(te,{width:a,disabled:!1})))))},re=n(9612),ie=n(4662),ae=n(5894),oe=n(1835),ce=n(7427),le=n(3219),se=n(1788),ue=n(9875),de=n(6735),me=n(7624),pe=n(9394),fe=n(3390),ge=n(3117),he=n(4436),Ee=n(9039),ve=n(4771),Ze=n(7205),xe=n(9378),be=n(488),we=n(4018),ye=n(8146),Ce=n(7642),Pe=n(4996),ke={owner:{label:"Owner",hash:"owner",desc:"Address of the Tezos account that owns the EVSE(s)."},id:{label:"Identifier",hash:"identifier",desc:"Identifier of the EVSE(s)."},nb:{label:"Number of EVSE(s)",hash:"number-of-evses",desc:"Number of EVSEs to declare."},evseserver:{label:"EVSE Server",hash:"evse-manager-server",desc:"EVSE Manager Server.",items:[{value:"werenode",label:"Werenode Server"}]},supervision:{label:"Type",hash:"type",desc:"Type of supervision",items:[{value:"wherenodeocpp16",label:"Werenode - OCPP 1.6"},{value:"wherenodeocpp20",label:"Werenode - OCPP 2.0"},{value:"werenoderpcget",label:"Werenode - RPC GET"}]},switchon:{label:"Url to switch on",hash:"switch-on-url",desc:"Url to switch EVSE on"},switchoff:{label:"Url to switch off",hash:"switch-off-url",desc:"Url to switch EVSE off"},connectormode:{label:"Mode",hash:"connector-mode",desc:"Mode for connector",items:[{value:"ac1",label:"Alternative - Monophased"},{value:"ac3",label:"Alternative - Triphased"},{value:"dc400",label:"Direct Courant - 400V"},{value:"dc800",label:"Direct Courant - 800V"},{value:"ind",label:"Inductive"}]},power:{label:"Power",hash:"connector-power",desc:"Connector power",items:[{value:2,label:"2kw"},{value:3,label:"3kw"},{value:7,label:"7kw"},{value:11,label:"11kw"},{value:22,label:"22kw"},{value:43,label:"43kw"},{value:50,label:"50kw"}]},connectortype:{label:"Type",hash:"connector-type",desc:"Connecter type",items:[{value:0,label:"Female domestic A"},{value:1,label:"Female domestic B"},{value:2,label:"Female domestic C"},{value:3,label:"Female domestic D"},{value:4,label:"Female domestic EF Schuko"},{value:5,label:"Female domestic G"},{value:6,label:"Female domestic H"},{value:7,label:"Female domestic I"},{value:8,label:"Female domestic J"},{value:9,label:"Female domestic K"},{value:10,label:"Female domestic L"},{value:11,label:"Female domestic M"},{value:12,label:"Female domestic N"},{value:13,label:"Female domestic O"},{value:14,label:"Female IEC 60309 one-phase blue 16A"},{value:15,label:"Female IEC 60309 three-phase red 16A"},{value:16,label:"Female IEC 60309 three-phase red 32A"},{value:17,label:"Female IEC 60309 three-phase red 63A"},{value:18,label:"Male type 1 with cable"},{value:19,label:"Female type 2"},{value:20,label:"Male type 2 with cable"},{value:21,label:"Male Tesla with cable"},{value:22,label:"Female type 3"},{value:23,label:"Combo type 1 with cable"},{value:24,label:"Combo type 2 with cable"},{value:25,label:"Male Tesla DC with cable"},{value:26,label:"Chademo with cable"}]},price:{label:"Price per minute",hash:"price-per-minute",desc:"Price per minute"},currency:{label:"Currency",hash:"currency",desc:"Currency",items:[{value:"euro",label:"EUR"}]},index:{label:"Index",hash:"index",desc:"Connector index"},freeusers:{label:"Free users",hash:"free-users",desc:"Free users"},freeuser:{label:"Free user account",hash:"free-users",desc:"Free user account address"},gps:{label:"GPS",hash:"gps-coordinate",desc:"GPS coordinate"}},Oe=function(e){return"wherenodeocpp16"==e||"wherenodeocpp20"==e},je=function(e){for(var t={},n=0;n<ke[e].items.length;n++)t[ke[e].items[n].value]=ke[e].items[n].label;return t},Se=n(222),Ie=n(6984),Fe=n(439),Te=(0,q.Z)({tools:{width:"100%",height:"64px",borderTopStyle:"solid",borderColor:"#34383e",borderWidth:"1px",paddingRight:"24px"},evse:{width:"200px",height:"300px",borderColor:"#34383e",borderWidth:"1px",borderStyle:"solid"},selected:{width:"200px",height:"300px",borderColor:"rgba(0, 177, 165, 1)",borderWidth:"2px",borderStyle:"solid"},icons:{borderTop:"1px solid #34383e",borderBottom:"1px solid #34383e",paddingLeft:"8px"},icon:{marginTop:"6px",marginRight:"4px",marginLeft:"4px"},connector:{borderBottom:"1px solid #34383e",padding:"8px"}}),Ne=function(e){var t=Te();return r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",className:t.connector},r.createElement(_.ZP,{item:!0}," ",r.createElement(Fe.Z,{fontSize:"small"})),r.createElement(_.ZP,{item:!0}," ",r.createElement(J.Z,{variant:"subtitle2"},e.data.index+":")),r.createElement(_.ZP,{item:!0,xs:12,style:{paddingLeft:"12px"}},r.createElement(J.Z,{variant:"subtitle2"},je("power")[e.data.power])),r.createElement(_.ZP,{item:!0,xs:12,style:{paddingLeft:"12px"}},r.createElement(J.Z,{variant:"subtitle2"},je("connectormode")[e.data.mode])))},ze=function(e){var t=T().setPanel,n=V(),i=n.select,a=n.selected,o=n.setSelected,c=b().evses,l=Te(),s=e.data,u=S(function(e,t){return e.map((function(e){return e.id})).indexOf(t)}(c.data,s.id)),d=(0,ie.Z)();return r.createElement(xe.Z,{className:i&&a.includes(s.id)?l.selected:l.evse,onClick:function(){i?a.includes(e.data.id)?o((function(e){return e.filter((function(e){return e!=s.id}))})):o((function(e){return e.concat([s.id])})):t(u)}},r.createElement(_.ZP,{container:!0,direction:"column",justifyContent:"flex-start",alignContent:"center",style:{height:"300px"}},r.createElement(_.ZP,{item:!0,style:{padding:"12px"}},r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center"},r.createElement(_.ZP,{item:!0,xs:12},r.createElement(J.Z,null,s.id)),r.createElement(_.ZP,{item:!0,xs:12},r.createElement(J.Z,{variant:"subtitle2"},je("supervision")[s.setting.supervision.type])))),r.createElement(_.ZP,{item:!0},r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",className:l.icons},r.createElement(_.ZP,{item:!0},r.createElement(Se.Z,{fontSize:"small",style:{color:d.palette.action.hover},className:l.icon})),r.createElement(_.ZP,{item:!0},r.createElement(Ie.Z,{fontSize:"small",style:{color:d.palette.action.disabled},className:l.icon})))),s.setting.connectors.map((function(e,t){return r.createElement(_.ZP,{key:"connector-"+s.id+"-"+t,item:!0},r.createElement(Ne,{data:e}))}))))},Ve=function(e){var t=b().evses,n=(0,ie.Z)();return r.createElement(Ce.Z,{maxWidth:"lg",style:{marginTop:"40px",height:e.height}},0==t.data.length?r.createElement(_.ZP,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",style:{height:"70%"}},r.createElement(_.ZP,{item:!0},r.createElement("img",{src:(0,Pe.Z)("img/werenode_logo_no_name_250px_black.png"),style:{width:"150px",marginBottom:"20px"}})),r.createElement(_.ZP,{item:!0},r.createElement(J.Z,{variant:"subtitle1",style:{color:n.palette.grey.A700}},"Click 'ADD' below to add an EVSE."))):r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:4,style:{paddingBottom:"40px"}},t.data.map((function(e){return r.createElement(_.ZP,{item:!0,key:e.id},r.createElement(ze,{data:e}))}))))},Ae=["Add","Edit","Remove","Sort"],Ue=function(e){var t=r.useRef(null),n=r.useState(!1),i=n[0],a=n[1],o=r.useState(!1),c=o[0],l=o[1],s=V(),u=s.selected,d=s.setSelect,m=s.setSelected,p=H().setSettings,f=T().setPanel,g=W().setEdit,h=b(),E=h.evses,v=h.setEvses,Z=function(e){t.current&&t.current.contains(e.target)||a(!1)};return r.createElement(_.ZP,{item:!0},r.createElement(he.Z,{variant:"contained",ref:t,"aria-label":"split button"},r.createElement(X.Z,{onClick:function(t){switch(e.selectedIndex){case 3:v((function(e){var t=[];return t=c?e.data.concat().sort((function(e,t){return e.id>t.id?1:-1})):e.data.concat().sort((function(e,t){return parseFloat(t.revenue)-parseFloat(e.revenue)})),Object.assign({},e,{data:t})})),l((function(e){return!e}));break;case 2:u.length>0&&v((function(e){return Object.assign({},e,{data:e.data.filter((function(e){return u.indexOf(e.id)<0}))})})),e.setSelectedIndex(0),m([]),d(!1);break;case 1:if(u.length>0){g(!0);var n=E.data.filter((function(e){return u.indexOf(e.id)>=0})).map((function(e){return e.setting}));p(n),f(-1)}break;case 0:f(-1)}}},Ae[e.selectedIndex]),r.createElement(X.Z,{size:"small","aria-controls":i?"split-button-menu":void 0,"aria-expanded":i?"true":void 0,"aria-label":"select EVSE action","aria-haspopup":"menu",onClick:function(){a((function(e){return!e}))}},r.createElement(Ee.Z,null))),r.createElement(be.Z,{open:i,anchorEl:t.current,role:void 0,transition:!0,disablePortal:!0},(function(t){var n=t.TransitionProps,i=t.placement;return r.createElement(Ze.Z,(0,ge.Z)({},n,{style:{transformOrigin:"bottom"===i?"center top":"center bottom"}}),r.createElement(K.Z,{style:{backgroundColor:"#242526"}},r.createElement(ve.Z,{onClickAway:Z},r.createElement(ye.Z,{id:"split-button-menu"},Ae.map((function(t,n){return r.createElement(we.Z,{key:t,disabled:!1,selected:n===e.selectedIndex,onClick:function(t){return function(t,n){e.setSelectedIndex(n),a(!1),1==n||2==n?d(!0):(m([]),d(!1))}(0,n)}},t)}))))))})))},Be=function(){var e=V().setSelected,t=b().evses;return r.createElement(_.ZP,{item:!0,style:{marginRight:"32px"}},r.createElement(X.Z,{variant:"text",onClick:function(){e(t.data.map((function(e){return e.id})))}},"select all"))},De=function(e){var t=Te(),n=r.useState(0),i=n[0],a=n[1],o=V().select;return r.createElement("div",{className:t.tools},r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-end",alignItems:"center",style:{height:"100%"}},o?r.createElement(Be,null):null,r.createElement(Ue,{selectedIndex:i,setSelectedIndex:a})))},Re=function(e){var t=e.height-64;return r.createElement(_.ZP,{container:!0,direction:"column-reverse",justifyContent:"space-between",alignItems:"center",style:{height:e.height}},r.createElement(_.ZP,{item:!0,style:{width:"100%"}},r.createElement(De,null)),r.createElement(_.ZP,{item:!0,style:{width:"100%",maxHeight:t,overflow:"auto"}},r.createElement(Ve,{height:t})))},We=n(5022),Le=n(3045),Me=n(8363),He=n(9763),Ge=n(6906),_e=n(5834),Je=n(102),Xe=n(4240),Ke=n(3502),qe=n(8589),Qe=(0,re.ZP)(Xe.Z)((function(e){var t,n=e.theme;return(t={})["& ."+Ke.Z.root+" ."+Ke.Z.notchedOutline]={borderColor:"#34383e"},t["&:hover ."+Ke.Z.root+" ."+Ke.Z.notchedOutline]={borderColor:"white"},t["& ."+Ke.Z.root+"."+Ke.Z.focused+" ."+Ke.Z.notchedOutline]={borderColor:n.palette.primary.main},t["& ."+Ke.Z.input]={color:"white"},t["&:hover ."+Ke.Z.input]={color:"white"},t["& ."+Ke.Z.root+"."+Ke.Z.focused+" ."+Ke.Z.input]={color:"white"},t["& ."+qe.Z.outlined]={color:n.palette.text.secondary},t["&:hover ."+qe.Z.outlined]={color:"white"},t["& ."+qe.Z.outlined+"."+qe.Z.focused]={color:n.palette.primary.main},t})),Ye=n(1259),$e=n(5473),et=(0,re.ZP)($e.Z)((function(e){var t,n=e.theme;return(t={})["& ."+Ke.Z.root+" ."+Ke.Z.notchedOutline]={borderColor:"#34383e"},t["&:hover ."+Ke.Z.root+" ."+Ke.Z.notchedOutline]={borderColor:"white"},t["& ."+Ke.Z.root+"."+Ke.Z.focused+" ."+Ke.Z.notchedOutline]={borderColor:n.palette.primary.main},t["& ."+Ke.Z.input]={color:"white"},t["&:hover ."+Ke.Z.input]={color:"white"},t["& ."+Ke.Z.root+"."+Ke.Z.focused+" ."+Ke.Z.input]={color:"white"},t["& ."+qe.Z.outlined]={color:n.palette.text.secondary},t["&:hover ."+qe.Z.outlined]={color:"white"},t["& ."+qe.Z.outlined+"."+qe.Z.focused]={color:n.palette.primary.main},t})),tt=n(3121),nt=(0,re.ZP)(tt.Z)((function(e){var t,n=e.theme;return(t={})["& ."+Ke.Z.root+" ."+Ke.Z.notchedOutline]={borderColor:"#34383e"},t["&:hover ."+Ke.Z.root+" ."+Ke.Z.notchedOutline]={borderColor:"white"},t["& ."+Ke.Z.root+"."+Ke.Z.focused+" ."+Ke.Z.notchedOutline]={borderColor:n.palette.primary.main},t["& ."+Ke.Z.input]={color:"white"},t["&:hover ."+Ke.Z.input]={color:"white"},t["& ."+Ke.Z.root+"."+Ke.Z.focused+" ."+Ke.Z.input]={color:"white"},t["& ."+qe.Z.outlined]={color:n.palette.text.secondary},t["&:hover ."+qe.Z.outlined]={color:"white"},t["& ."+qe.Z.outlined+"."+qe.Z.focused]={color:n.palette.primary.main},t})),rt=n(3065),it=n(9592),at=["className"],ot=(0,re.ZP)((function(e){var t=e.className,n=(0,Je.Z)(e,at);return r.createElement(rt.Z,(0,ge.Z)({},n,{classes:{popper:t},placement:"right-start"}))}))((function(e){var t;e.theme;return(t={})["& ."+it.Z.tooltip]={backgroundColor:"#000"},t})),ct=function(e){var t=window.location.protocol+"//"+window.location.host+(0,Pe.Z)("docs/myevsesmanual#"+ke[e.identifier].hash),n=e.error?"10px":"32px";return r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",style:{width:"100%",marginBottom:n}},r.createElement(_.ZP,{item:!0,children:e.element,style:{width:"calc(100% - 64px)"}}),r.createElement(_.ZP,{item:!0,style:{marginLeft:"12px",marginRight:"32px"}},r.createElement(ot,{title:r.createElement(r.Fragment,null,r.createElement(J.Z,{variant:"caption"},ke[e.identifier].desc),r.createElement(X.Z,{size:"small",variant:"text",style:{fontSize:"10px"},onClick:function(){window.open(t,"My EVSEs User Manual")}},"Learn more..."))},r.createElement(P.Z,{fontSize:"small"}))))},lt=function(e){var t=W(),n=t.data,i=t.setData;return r.createElement(ct,{identifier:e.identifier,element:r.createElement(et,{style:{width:"100%"}},r.createElement(Ye.Z,null,ke[e.identifier].label),r.createElement(Qe,{id:"evses"+e.identifier+e.extraid,label:ke[e.identifier].label,value:void 0!==e.getValue?e.getValue:n[e.identifier],onChange:void 0!==e.handleChange?e.handleChange:function(t){i((function(n){return n[e.identifier]=t.target.value,Object.assign({},n,{edition:!0})}))}},ke[e.identifier].items.map((function(e){return r.createElement(we.Z,{key:e.value,value:e.value},e.label)}))))})},st=function(e){var t=W(),n=t.data,i=t.setData;var a=!!n.showerrors&&function(){var t=void 0;t=void 0!==e.getValue?e.getValue:n[e.identifier];var r=!1;return void 0!==e.isError&&e.isError(t)&&(r=!0),null==t||""==t||r}();return r.createElement(ct,{identifier:e.identifier,error:a,element:r.createElement(nt,{id:"evses"+e.identifier+(void 0!==e.extraid?e.extraid:""),label:ke[e.identifier].label,color:"primary",variant:"outlined",value:void 0!==e.getValue?e.getValue:n[e.identifier],onChange:void 0!==e.handleChange?e.handleChange:function(t){i((function(n){return n[e.identifier]=t.target.value,Object.assign({},n,{edition:!0})}))},type:e.type,fullWidth:!0,error:a,helperText:a?e.errorText:""})})},ut=n(1568),dt=n(9067),mt=n(8428),pt=n(6650),ft=n(2201),gt=n(2500),ht=n(3790),Et=n(8020),vt=n(2138),Zt=n(4566);function xt(e,t){switch(e){case"xs":return"xs"==t;case"sm":return"xs"==t||"sm"==t;default:return!0}}var bt=(0,q.Z)({paper:{border:"1px solid #34383e",bgcolor:"background.paper",boxShadow:10,marginLeft:"12px",marginRight:"12px"},header:{borderBottom:"1px solid #34383e",width:"100%"},buttons:{borderTop:"1px solid #34383e",padding:"24px"},title:{padding:"24px"},panel:{padding:"24px"},connectorformpanel:{paddingTop:"32px",paddingRight:"24px",paddingLeft:"24px"},connector:{border:"1px solid #34383e"},freeusers:{border:"1px solid #34383e",borderRadius:"4px",padding:"24px",position:"relative"},settings:{paddingTop:"24px",paddingLeft:"24px"}}),wt=function(e){var t=bt(),n=W(),i=n.setOpenAddAddress,a=n.setAddFreeUsers,o=(0,ie.Z)(),c=e.freeusers.map((function(t){return r.createElement(_.ZP,{key:t,item:!0},r.createElement(ut.Z,{variant:"outlined",onDelete:(n=t,function(){e.rmFreeUser(n)}),label:t}));var n}));return c=c.concat([r.createElement(_.ZP,{key:"add",item:!0},r.createElement(X.Z,{onClick:function(){a(e.addFreeUser),i(!0)}},"add address"))]),r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",className:t.freeusers},r.createElement(J.Z,{variant:"subtitle2",style:{position:"absolute",top:"-11px",backgroundColor:o.palette.background.paper,paddingLeft:"8px",paddingRight:"8px"}},"Free access address(es)"),r.createElement(_.ZP,{item:!0,container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",spacing:2},c))},yt=function(e){var t=bt(),n=W(),i=n.data,a=n.setData;return r.createElement(_.ZP,{container:!0,direction:"column"},r.createElement(_.ZP,{item:!0,className:t.panel},r.createElement(wt,{freeusers:i.freeusers,addFreeUser:function(e){a((function(t){return Object.assign({},t,{edition:!0,freeusers:t.freeusers.filter((function(t){return t!=e})).concat([e])})}))},rmFreeUser:function(e){a((function(t){return Object.assign({},t,{edition:!0,freeusers:t.freeusers.filter((function(t){return t!=e}))})}))}})))},Ct=function(e){var t,n=bt();return r.createElement(_.ZP,{item:!0,key:e.identifier,xs:12},r.createElement(xe.Z,{key:e.identifier,className:n.connector},r.createElement(We.Z,null,r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},Oe(e.supervisiontype)?r.createElement(_.ZP,{item:!0},r.createElement(ut.Z,{variant:"outlined",icon:r.createElement(ft.Z,null),label:e.data.index})):null,r.createElement(_.ZP,{item:!0},r.createElement(ut.Z,{variant:"outlined",icon:r.createElement(Fe.Z,null),label:(t=e.data.mode,je("connectormode")[t])})),r.createElement(_.ZP,{item:!0},r.createElement(ut.Z,{variant:"outlined",icon:r.createElement(Ie.Z,null),label:function(e){return je("power")[e]}(e.data.power)})),r.createElement(_.ZP,{item:!0},r.createElement(ut.Z,{variant:"outlined",icon:r.createElement(pt.Z,null),label:function(e){return je("connectortype")[e]}(e.data.type)})),r.createElement(_.ZP,{item:!0},r.createElement(ut.Z,{variant:"outlined",icon:r.createElement(gt.Z,null),label:function(e){var t=je("currency")[e.currency];return e.price+" "+t}(e.data)})))),r.createElement(Le.Z,null,r.createElement(se.Z,{onClick:function(){return e.editConnector(e.data.index)}},r.createElement(dt.Z,{fontSize:"small"})),r.createElement(se.Z,{onClick:function(){return e.rmConnector(e.data.index)}},r.createElement(mt.Z,{fontSize:"small"})))))},Pt=function(){var e=bt(),t=W(),n=t.data,i=t.setOpen,a=t.rmConnector,o=t.editConnector,c=t.setData,l=t.setAddConnector,s=t.setIsInvalidIndex,u=function(){c((function(e){var t={index:parseInt(e.index),mode:e.connectormode,power:e.power,type:e.connectortype,price:e.price,currency:e.currency};return-1==e.connectoredit?Object.assign({},e,{edition:!0,connectors:e.connectors.concat([t])}):Object.assign({},e,{edition:!0,connectoredit:-1,connectors:e.connectors.map((function(n){return n.index==e.connectoredit?t:n}))})}))},d=function(e){return-1!=n.connectors.map((function(e){return e.index})).indexOf(parseInt(e))},m=(0,ie.Z)();return r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",className:e.panel,spacing:4},n.connectors.length>0?n.connectors.map((function(e,t){return r.createElement(Ct,{key:"connector"+t,identifier:t,rmConnector:a,editConnector:o,supervisiontype:n.supervision.type,data:n.connectors[t]})})):r.createElement(_.ZP,{item:!0,style:{height:"150px"},container:!0,direction:"row",justifyContent:"center",alignContent:"center"},r.createElement(J.Z,{variant:"subtitle1",style:{color:n.showerrors?m.palette.error.main:"#34383e"}},"No Connector. Click 'ADD CONNECTOR'.")),r.createElement(_.ZP,{xs:12,item:!0,container:!0,direction:"row",justifyContent:"flex-end",alignContent:"center"},r.createElement(_.ZP,{item:!0},r.createElement(X.Z,{onClick:function(){i(!0),l(u),s(d)}},"add connector"))))},kt=function(e){var t=H(),n=t.settings,i=t.setSettings;return r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center"},r.createElement(_.ZP,{item:!0,md:12,sm:12,xs:12},r.createElement(st,{identifier:"switchon",extraid:e.index,getValue:n[e.index].supervision.switchon,handleChange:function(t){i((function(n){return n.map((function(n,r){return r==e.index?Object.assign({},n,{supervision:Object.assign({},n.supervision,{switchon:t.target.value})}):n}))}))},errorText:"Invalid Url"})),r.createElement(_.ZP,{item:!0,md:12,sm:12,xs:12},r.createElement(st,{identifier:"switchoff",extraid:e.index,getValue:n[e.index].supervision.switchoff,handleChange:function(t){i((function(n){return n.map((function(n,r){return r==e.index?Object.assign({},n,{supervision:Object.assign({},n.supervision,{switchoff:t.target.value})}):n}))}))},errorText:"Invalid Url"})))},Ot=function(){var e=W(),t=e.data,n=e.setSwitchOn,i=e.setSwitchOff;return r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center"},r.createElement(_.ZP,{item:!0,md:12,sm:12,xs:12},r.createElement(st,{identifier:"switchon",getValue:t.supervision.switchon,handleChange:function(e){return n(e.target.value)},errorText:"Invalid Url"})),r.createElement(_.ZP,{item:!0,md:12,sm:12,xs:12},r.createElement(st,{identifier:"switchoff",getValue:t.supervision.switchoff,handleChange:function(e){return i(e.target.value)},errorText:"Invalid Url"})))},jt=function(e){var t=bt(),n=W(),i=n.data,a=n.setSupervision;return r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",className:t.panel},r.createElement(_.ZP,{item:!0,sm:12,md:6,xs:12},r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center"},r.createElement(_.ZP,{item:!0,md:12,sm:12,xs:12},r.createElement(lt,{identifier:"supervision",handleChange:function(e){a(e.target.value)},getValue:i.supervision.type})),"werenoderpcget"==i.supervision.type?r.createElement(Ot,null):null)))},St=function(e){var t=bt(),n=W(),i=n.data,a=n.setData,o=n.setNb,c=n.setId,l=h();return r.useEffect((function(){i.edition||a((function(e){return Object.assign({},e,{owner:l,freeusers:e.freeusers.concat([l])})}))}),[]),r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",className:t.panel},r.createElement(_.ZP,{item:!0,sm:12,md:6,xs:12},r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center"},r.createElement(_.ZP,{item:!0,xs:12},r.createElement(st,{identifier:"owner",isError:function(){return!A(i.owner)},errorText:"Invalid address format"})),r.createElement(_.ZP,{item:!0,xs:6},r.createElement(st,{identifier:"id",handleChange:function(e){return c(e.target.value)},errorText:"Empty identifier"})),r.createElement(_.ZP,{item:!0,xs:6},r.createElement(st,{identifier:"nb",type:"number",handleChange:function(e){return o(e.target.value)}})),r.createElement(_.ZP,{item:!0,xs:12},r.createElement(lt,{identifier:"evseserver"})))))},It=function(e){var t=bt(),n=r.useState(!1),i=n[0],a=n[1],o=H(),c=o.settings,l=o.setSettings,s=o.setSetting,u=W(),d=u.setOpen,m=u.setData,p=u.setAddConnector,f=u.setIsInvalidIndex,g=b().evses,h=function(t){return function(){l((function(n){return n.map((function(n,r){return r==e.index?Object.assign({},n,{connectors:n.connectors.filter((function(e,n){return n!=t}))}):n}))}))}},E=function(t){l((function(n){return n.map((function(n,r){if(r==e.index){var i={index:parseInt(t.index),mode:t.connectormode,power:t.power,type:t.connectortype,price:t.price,currency:t.currency};return-1==t.connectoredit?Object.assign({},n,{connectors:n.connectors.concat([i])}):Object.assign({},n,{connectors:n.connectors.map((function(e){return e.index==t.connectoredit?i:e}))})}return n}))})),m((function(e){return Object.assign({},e,{connectoredit:-1})}))},v=function(t){return function(){p(E);var n=c[e.index].connectors.find((function(e){return e.index==t}));m((function(e){return Object.assign({},e,{edition:!0,open:!0,connectoredit:n.index,index:parseInt(n.index),connectormode:n.mode,power:n.power,connectortype:n.type,price:n.price,currency:n.currency})}))}},Z=function(t){return-1!=c[e.index].connectors.map((function(e){return e.index})).indexOf(parseInt(t))};return r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",className:t.settings},r.createElement(_.ZP,{item:!0,md:4,sm:12,xs:12},r.createElement(st,{identifier:"id",extraid:e.index,getValue:c[e.index].id,handleChange:function(t){return s(e.index)("id")(t.target.value)},isError:function(e){return-1!==g.data.map((function(e){return e.id})).indexOf(e)},errorText:"Identifier already taken"})),r.createElement(_.ZP,{item:!0,md:6,sm:12,xs:12},r.createElement(st,{identifier:"gps",extraid:e.index,getValue:c[e.index].gps,handleChange:function(t){return s(e.index)("gps")(t.target.value)},isError:function(e){return""==e},errorText:"Invalid GPS value"})),r.createElement(_.ZP,{item:!0,xs:12,style:{marginBottom:"1px"}},r.createElement(ht.Z,null,r.createElement(Et.Z,{expandIcon:r.createElement(Zt.Z,null),onClick:function(){a((function(e){return!e}))},"aria-controls":"panel1a-content-"+e.index,id:"panel1a-header-"+e.index},r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",spacing:2},r.createElement(J.Z,{variant:"subtitle2",style:{color:"#34383e"}},"Click to "+(i?"collapse":"expand")+" settings"))),r.createElement(vt.Z,{style:{padding:0}},r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center"},r.createElement(_.ZP,{item:!0,sm:12,md:6,xs:12},r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center"},r.createElement(_.ZP,{item:!0,md:12,sm:12,xs:12},r.createElement(lt,{identifier:"supervision",extraid:e.index,handleChange:function(t){l((function(n){return n.map((function(n,r){return r==e.index?"werenoderpcget"==t.target.value?Object.assign({},n,{supervision:{type:t.target.value,switchon:"",switchoff:""}}):Object.assign({},n,{supervision:Object.assign({},n.supervision,{type:t.target.value})}):n}))}))},getValue:c[e.index].supervision.type})),"werenoderpcget"==c[e.index].supervision.type?r.createElement(kt,{index:e.index}):null)),r.createElement(_.ZP,{item:!0,xs:12,container:!0,style:{paddingRight:"32px",marginBottom:"12px"},spacing:2},c[e.index].connectors.map((function(t,n){return r.createElement(Ct,{key:"connector"+e.index+n,identifier:n,rmConnector:h(n),editConnector:v(t.index),supervisiontype:c[e.index].supervision.type,data:t})}))),r.createElement(_.ZP,{item:!0,xs:12,container:!0,justifyContent:"flex-end",style:{paddingRight:"32px",marginBottom:"12px"}},r.createElement(X.Z,{onClick:function(){d(!0),p(E),f(Z)}},"add connector")),r.createElement(_.ZP,{item:!0,xs:12,style:{paddingRight:"32px",marginBottom:"32px"}},r.createElement(wt,{freeusers:c[e.index].freeusers,addFreeUser:function(t){l((function(n){return n.map((function(n,r){return r==e.index?Object.assign({},n,{freeusers:n.freeusers.filter((function(e){return e!=t})).concat([t])}):n}))}))},rmFreeUser:function(t){l((function(n){return n.map((function(n,r){return r==e.index?Object.assign({},n,{freeusers:n.freeusers.filter((function(e){return e!=t}))}):n}))}))}})))))))},Ft=function(){var e=H().settings;return r.createElement(_.ZP,{container:!0,direction:"row"},e.map((function(e,t){return r.createElement(_.ZP,{key:"evse"+t,xs:12,item:!0,style:{borderBottom:"1px solid #34383e"}},r.createElement(It,{index:t}))})))},Tt=function(){return r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center",spacing:1,style:{padding:"32px"}},r.createElement(_.ZP,{item:!0,xs:12},r.createElement(J.Z,null,"Data size : 0 bytes")),r.createElement(_.ZP,{item:!0,xs:12},r.createElement(J.Z,null,"Cost estimation : 0 XTZ")))},Nt=[{title:"General Settings",panel:r.createElement(St,null)},{title:"Supervision",panel:r.createElement(jt,null)},{title:"Connectors",panel:r.createElement(Pt,null)},{title:"Other Settings",panel:r.createElement(yt,null)},{title:"Edit Settings",panel:r.createElement(Ft,null)},{title:"Validate",panel:r.createElement(Tt,null)}],zt=function(e){return e?[{title:"Edit Settings",panel:r.createElement(Ft,null)},{title:"Validate",panel:r.createElement(Tt,null)}]:Nt},Vt=function(e){var t,n=bt(),i=T().setPanel,a=W().data,o=(t=(0,ie.Z)(),[].concat(t.breakpoints.keys).reverse().reduce((function(e,n){var r=(0,_e.Z)(t.breakpoints.up(n));return!e&&r?n:e}),null)||"xs");return r.createElement(_.ZP,{item:!0},r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-end",alignContent:"end",className:n.buttons},r.createElement(_.ZP,{item:!0,xs:12,style:{marginBottom:"18px"}},r.createElement(Me.Z,{activeStep:e.wizardPanelIdx,orientation:xt("sm",o)?"vertical":"horizontal"},zt(a.edit).map((function(e){return r.createElement(He.Z,{key:e.title},r.createElement(Ge.Z,null,e.title))})))),r.createElement(_.ZP,{item:!0,style:{marginRight:"18px"}},r.createElement(X.Z,{size:"small",disableElevation:!0,variant:"text",onClick:function(){i(0)}},"Cancel")),r.createElement(_.ZP,{item:!0,style:{marginRight:"18px"}},r.createElement(X.Z,{size:"small",disableElevation:!0,disabled:0==e.wizardPanelIdx,variant:"text",onClick:function(){e.setWizardPanel(e.wizardPanelIdx-1)}},"Previous")),r.createElement(_.ZP,{item:!0},r.createElement(X.Z,{size:"small",disableElevation:!0,variant:"contained",onClick:e.handleClick},e.wizardPanelIdx==Nt.length-1?"ok":"next"))))},At=function(e){var t=bt(),n=r.useState(0),i=n[0],a=n[1],o=W(),c=o.data,l=o.setShowErrors,s=o.setEdit,u=H().createSettings,d=b(),m=d.evses,p=d.setEvses,f=H().settings,g=T().setPanel,h=V(),E=h.selected,v=h.setSelect,Z=h.setSelected;return r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",alignContent:"center",style:{height:e.height}},r.createElement(_.ZP,{item:!0,lg:9,md:12},r.createElement(K.Z,{elevation:3,className:t.paper},r.createElement(_.ZP,{container:!0,direction:"column",justifyContent:"flex-start",alignContent:"flex-start"},r.createElement(_.ZP,{item:!0,className:t.header},r.createElement(J.Z,{variant:"h5",component:"div",className:t.title},zt(c.edit)[i].title)),r.createElement(_.ZP,{item:!0,style:{maxHeight:e.height-200,overflow:"auto"}},zt(c.edit)[i].panel),r.createElement(Vt,{handleClick:function(){if(i==zt(c.edit).length-1){if(c.edit){for(var e=0,t=[],n=0;n<m.data.length;n++){var r=m.data[n];-1!==E.indexOf(r.id)?(t=t.concat([{key:f[e].id,id:f[e].id,revenue:0,setting:f[e]}]),e++):t=t.concat([r])}p((function(e){return Object.assign({},e,{data:t})}))}else{var o=f.map((function(e,t){return{key:e.id,id:e.id,revenue:0,setting:Object.assign({},e)}})),d={},h=[];o[0].setting.connectors.forEach((function(e){h.push(e.type),d[e.power]=parseInt(e.price/60*1e6)})),fetch("https://us-central1-werenode-37b0a.cloudfunctions.net/addPlug",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({services:d,types:h,id:o[0].id.split(" ")[0],lat:parseFloat(o[0].setting.gps.split(",")[0]),long:parseFloat(o[0].setting.gps.split(",")[1])})}),p((function(e){return Object.assign({},e,{data:e.data.concat(o)})}))}g(0),s(!1),Z([]),v(!1)}else(i==Nt.length-6?""!=c.id&&A(c.owner):i==Nt.length-5?"werenoderpcget"!=c.supervision.type||null!=c.supervision.switchon&&null!=c.supervision.switchoff:!(i==Nt.length-4?0==c.connectors.length:i==Nt.length-2&&f.reduce((function(e,t){return e||""==t.gps}),!1)))?(i==zt(c.edit).length-3&&u(c),l(!1),a((function(e){return e+1}))):l(!0)},wizardPanelIdx:i,setWizardPanel:a})))))},Ut=n(7038),Bt=n(5025),Dt=function(e){return{top:"61px",backgroundColor:e.palette.background.paper,borderColor:"#34383e"}},Rt=function(e){return Object.assign({width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"},Dt(e))},Wt=function(e){var t;return Object.assign(((t={transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:"calc("+e.spacing(7)+" + 1px)"})[e.breakpoints.up("sm")]={width:"calc("+e.spacing(9)+" + 1px)"},t),Dt(e))},Lt=(0,re.ZP)("div")((function(e){var t=e.theme;return Object.assign({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:t.spacing(0,3)},t.mixins.toolbar)})),Mt=(0,re.ZP)(oe.ZP,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object.assign({width:240,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box"},n&&Object.assign({},Rt(t),{"& .MuiDrawer-paper":Rt(t)}),!n&&Object.assign({},Wt(t),{"& .MuiDrawer-paper":Wt(t)}))})),Ht=(0,re.ZP)(le.Z)({borderColor:"#34383e"}),Gt=function(e){var t=h(),n=b().evses,i="";if(e.panel>=S(0)){var a=e.panel-10*O.length;i=n.data[a].id}else i=-1==e.panel?"Add EVSE(s)":O[e.panel].title;return r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center"},r.createElement(_.ZP,{item:!0},r.createElement(J.Z,{variant:"h5"},i)),r.createElement(_.ZP,{item:!0},r.createElement(_.ZP,{container:!0,direction:"row",spacing:1},r.createElement(_.ZP,{item:!0},r.createElement(J.Z,{variant:"caption"},"Connected as")),r.createElement(_.ZP,{item:!0},r.createElement(J.Z,{variant:"caption",style:{fontFamily:"Courier Prime, monospace"}},t)))))},_t=function(e){return r.useEffect((function(){e.setHeaderHeight(document.getElementById("drawerheader").clientHeight)}),[]),r.createElement(Lt,{id:"drawerheader"},r.createElement(Gt,{panel:e.panel}))},Jt=function(){return r.createElement("div",null)};function Xt(e){var t=(0,ie.Z)(),n=T(),i=n.panel,a=n.setPanel,o=n.openevses,c=n.setOpenEvses,l=n.open,s=n.setOpen,u=r.useState(0),d=u[0],m=u[1],p=b().evses,f=function(e){return function(t){switch(e){case 1:o?c(!1):(c(!0),l||s(!0));break;default:a(e)}}},g=function(e){return o?i==e:i>=S(0)?1==e:i==e};return r.createElement(ae.Z,{sx:{display:"flex"}},r.createElement(Mt,{variant:"permanent",open:l},r.createElement(Lt,null,r.createElement(se.Z,{onClick:function(){s((function(e){return!e})),o?c(!1):!l&&i>=S(0)&&c(!0)},color:"inherit"},l?r.createElement(ue.Z,null):r.createElement(de.Z,null))),r.createElement(Ht,null),r.createElement(ce.Z,null,O.slice(0,3).reduce((function(e,n){var a=r.createElement(me.ZP,{button:!0,key:n.title,onClick:f(n.id),selected:g(n.id)},r.createElement(pe.Z,null,n.icon),r.createElement(fe.Z,{primary:n.title}),n.title==j?o?r.createElement(Bt.Z,null):r.createElement(Zt.Z,null):null);switch(n.title){case j:var c=p.data.map((function(e,n){var a=S(n);return r.createElement(me.ZP,{key:a,button:!0,style:{paddingLeft:t.spacing(4)},selected:i==a,onClick:f(a)},r.createElement(fe.Z,{primary:e.id}))}));return e.concat([a,r.createElement(Ut.Z,{key:"collapse",in:o,timeout:"auto",unmountOnExit:!0},r.createElement(ce.Z,{component:"div",disablePadding:!0},c))]);default:return e.concat([a])}}),[])),r.createElement(Ht,null),r.createElement(ce.Z,null,O.slice(3,5).map((function(e){return r.createElement(me.ZP,{button:!0,key:e.title,onClick:f(e.id),selected:g(e.id)},r.createElement(pe.Z,null,e.icon),r.createElement(fe.Z,{primary:e.title}))})))),r.createElement(ae.Z,{component:"main",sx:{flexGrow:1},style:{height:e.height}},r.createElement(_t,{panel:i,setHeaderHeight:m}),function(t){switch(t){case-1:return r.createElement(At,{height:e.height-d});case 0:return r.createElement(Re,{height:e.height-d});default:return r.createElement(Jt,null)}}(i)))}var Kt=n(9223),qt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,p:4},Qt=function(){var e=W(),t=e.data,n=e.setIndex,i=e.setPrice,a=e.setOpen,o=e.setShowErrors,c=function(e){return t.connectoredit!=t.index&&t.isInvalidIndex(e)};return r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center"},r.createElement(_.ZP,{md:8,sm:12,xs:12,item:!0},r.createElement(lt,{identifier:"connectormode"})),r.createElement(_.ZP,{md:4,sm:12,xs:12,item:!0},r.createElement(lt,{identifier:"power"})),r.createElement(_.ZP,{md:12,sm:12,xs:12,item:!0},r.createElement(lt,{identifier:"connectortype"})),r.createElement(_.ZP,{md:8,sm:12,xs:12,item:!0},r.createElement(st,{identifier:"price",handleChange:function(e){return i(e.target.value)},errorText:"Price not set"})),r.createElement(_.ZP,{md:4,sm:4,xs:12,item:!0},r.createElement(lt,{identifier:"currency"})),Oe(t.supervision.type)?r.createElement(_.ZP,{md:4,sm:4,xs:12,item:!0},r.createElement(st,{identifier:"index",type:"number",handleChange:function(e){return n(e.target.value)},errorText:"Index already set",isError:c})):null,r.createElement(_.ZP,{xs:12,item:!0},r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"space-between",alignContent:"flex-end"},r.createElement(_.ZP,{item:!0},r.createElement(X.Z,{onClick:function(){a(!1)}},"cancel")),r.createElement(_.ZP,{item:!0},r.createElement(X.Z,{variant:"contained",onClick:function(){c(t.index)||void t.price?o(!0):(o(!1),t.addConnector(t),a(!1))}},"ok")))))};function Yt(){var e=W(),t=e.data,n=e.setOpen,i=e.setShowErrors;return r.createElement(Kt.Z,{open:t.open,onClose:function(){n(!1),i(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},r.createElement(ae.Z,{sx:qt},r.createElement(J.Z,{id:"modal-modal-title",variant:"h6",component:"h2",style:{marginBottom:"34px"}},"Connector settings"),r.createElement(Qt,null)))}var $t={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,width:"500px",p:4,paddingBottom:"8px",paddingRight:"12px"},en=function(){var e=r.useState(""),t=e[0],n=e[1],i=W(),a=i.data,o=i.setOpenAddAddress,c=i.setShowErrors;return r.createElement(Kt.Z,{open:a.openaddaddress,onClose:function(){o(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},r.createElement(ae.Z,{sx:$t},r.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignContent:"center"},r.createElement(_.ZP,{item:!0,xs:12},r.createElement(st,{identifier:"freeuser",getValue:t,handleChange:function(e){return n(e.target.value)},isError:function(e){return!A(e)},helperText:"Invalid address"})),r.createElement(_.ZP,{item:!0,xs:12,container:!0,direction:"row",justifyContent:"flex-end",alignContent:"center"},r.createElement(X.Z,{onClick:function(){A(t)?(a.addFreeUser(t),o(!1),c(!1)):c(!0)}},"ok")))))},tn=function(e){return E()?r.createElement(Xt,{height:e.height}):r.createElement(ne,{width:e.width})},nn=function(e){var t=r.useMemo((function(){return(0,o.Z)({palette:{type:"dark",primary:{main:"rgba(0, 177, 165, 1)",contrastText:"white"},background:{paper:"#18191a",default:"#18191a"},text:{primary:"#fff",secondary:"rgba(255,255,255,0.7)",disabled:"grey"},info:{main:"#c7b45f"},action:{active:"rgb(255,255,255)",disabled:"#34383e",disabledBackground:"#34383e",hover:"rgba(0, 177, 165, 1)",selectedOpacity:"0.8"}}})}),[!0]);return r.createElement(c.Z,{theme:t},r.createElement(f,{appName:G.appname},r.createElement(x,null,r.createElement(F,null,r.createElement(z,null,r.createElement(R,null,r.createElement(M,null,r.createElement("div",{style:{height:e.height+"px",width:e.width+"px"}},r.createElement(tn,{height:e.height,width:e.width})),r.createElement(Yt,null),r.createElement(en,null))))))))};function rn(){var e=a.Z.canUseDOM?window:{innerWidth:0,innerHeight:0};return{width:e.innerWidth,height:e.innerHeight}}var an=function(){var e,t,n,a=(e=(0,r.useState)(rn()),t=e[0],n=e[1],(0,r.useEffect)((function(){function e(){n(rn())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),t),o=a.width,c=a.height;return r.createElement(i.Z,{noFooter:!0},r.createElement(nn,{width:o,height:c-60}))}},2361:function(){},4616:function(){}}]);